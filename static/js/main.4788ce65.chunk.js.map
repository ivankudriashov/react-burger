{"version":3,"sources":["components/orderIngredientsDetails/orderIngredientsDetails.module.css","components/burgerConstructorIngridient/burgerConstructorIngridient.module.css","components/modalOverlay/modalOverlay.module.css","pages/ingredientDetailsPage/ingredientDetailsPage.module.css","pages/orderIngredientsDetailsPage/orderIngredientsDetailsPage.module.css","pages/feedPage/feed.module.css","components/order/order.module.css","components/appHeader/appHeader.tsx","services/types/types.tsx","services/actions/state.tsx","services/actions/user.tsx","pages/loginPage/login.tsx","pages/registrationPage/registration.tsx","pages/forgotPage/forgot.tsx","pages/resetPage/reset.tsx","components/asideMenu/asideMenu.tsx","pages/profilePage/profile.tsx","components/burgerIngredient/burgerIngredient.tsx","components/burgerIngredients/burgerIngredients.tsx","services/actions/order.tsx","components/burgerConstructorIngridient/burgerConstructorIngridient.tsx","components/burgerConstructor/burgerConstructor.tsx","components/modalOverlay/modalOverlay.tsx","components/modal/modal.tsx","components/orderDetails/orderDetails.tsx","pages/constructorPage/constructor.tsx","components/ingredientDetails/ingredientDetails.tsx","pages/ingredientDetailsPage/ingredientDetailsPage.tsx","components/orderIngredientIcon/orderIngredientIcon.tsx","utils/order.tsx","components/order/order.tsx","services/actions/ws.tsx","pages/feedPage/feed.tsx","pages/userOrdersPage/userOrdersPage.tsx","components/protected-route.tsx","components/orderIngredientsDetails/orderIngredientsDetails.tsx","pages/orderIngredientsDetailsPage/orderIngredientsDetailsPage.tsx","components/app/app.tsx","services/reducers/order.tsx","services/reducers/state.tsx","services/reducers/user.tsx","services/reducers/ws.tsx","services/reducers/index.tsx","services/middleware/socketMiddleware.tsx","services/store.tsx","index.tsx","components/appHeader/appHeader.module.css","components/asideMenu/asideMenu.module.css","pages/loginPage/login.module.css","pages/profilePage/profile.module.css","components/burgerConstructor/burgerConstructor.module.css","pages/registrationPage/registration.module.css","components/burgerIngredients/burgerIngredients.module.css","pages/resetPage/reset.module.css","components/ingredientDetails/ingredientDetails.module.css","components/orderIngredientIcon/orderIngredientIcon.module.css","pages/forgotPage/forgot.module.css","components/orderDetails/orderDetails.module.css","pages/userOrdersPage/userOrdersPage.module.css","components/burgerIngredient/burgerIngredient.module.css","components/modal/modal.module.css","components/app/app.module.css"],"names":["module","exports","AppHeader","location","useLocation","className","headerStyles","header","container","navigation","to","exact","navigationLink","activeClassName","navigationLink__active","type","pathname","linkText","profile","useSelector","selectorHook","useDispatch","dispatchHook","GET_ALL_INGRIDIENTS_REQUEST","GET_ALL_INGRIDIENTS_SUCCESS","GET_ALL_INGRIDIENTS_FAILED","OPEN_INGRIDIENT_DATA","CLOSE_INGRIDIENT_DATA","BASE_URL","checkResponse","res","ok","json","Promise","reject","status","GET_USER","CLEAN_USER","setCookie","name","value","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","getUserInfo","accessToken","refreshToken","dispatch","fetch","method","headers","then","success","email","user","catch","err","message","body","JSON","stringify","authToken","split","refToken","console","log","LoginPage","state","useState","setEmail","password","setPassword","from","loginStyles","login","login__title","onSubmit","e","preventDefault","data","logIn","action","login__form","login__input","onChange","target","size","login__wrapper","login__link","RegistarationPage","form","setValue","onRegistration","useCallback","createUser","registrationStyles","registration","registration__title","registration__form","registration__input","placeholder","error","errorText","registration__wrapper","registration__link","emailValue","setEmailValue","setSuccess","forgotStyles","forgot","forgot__title","getResetPasswordCode","forgot__form","forgot__input","forgot__wrapper","forgot__link","ResetPasswordPage","passwordValue","setPasswordValue","codeValue","setCodeValue","resetStyles","reset","reset__title","resetPassword","reset__form","reset__input","reset__wrapper","reset__link","AsideMenu","menuStyles","menu","menu__item","menu__link","menu__linkActive","onClick","logOut","ProfilePage","actionButtonsActive","setActionButtonsActive","returnValue","actionsButtonRender","profileStyles","profile__formActions","profile__menu","profile__info","profile__infoItem","token","profile__form","profile__input","BurgerIngredient","item","id","constructorIngridientsId","order","useDrag","dragRef","background","burgerIngredientStyles","burgerIngredient","ref","burgerIngredient__item","count","ingredient","forEach","_id","getCount","src","image","alt","burgerIngredient__price","price","BurgerIngredients","current","setCurrent","ingridients","refBun","useRef","refSauce","refMain","burgerIngredientsStyles","burgerIngredients","style","display","active","scrollIntoView","behavior","burgerIngredients__scrollWrapper","onScroll","listTop","getBoundingClientRect","top","bunTop","bunBottom","bottom","sauceTop","sauceBottom","mainTop","mainBottom","burgerIngredients__ingredients","burgerIngredients__items","filter","map","GET_ORDER_NUMBER_SUCCESS","GET_ORDER_NUMBER_FAILED","GET_INGRIDIENTS_IDS","GET_INGRIDIENTS_CONSTRUCTOR","GET_BUN_CONSTRUCTOR","GET_OTHER_INGRIDIENTS_CONSTRUCTOR","DELETE_INGRIDIENT","GET_TOTAL_PRICE","OPEN_ORDER_DATA","CLOSE_ORDER_DATA","CONSTRUCTOR_INGREDIENTS_SORT","CLEAR_CONSTRUCTOR","BurgerConstructorIngridient","deleteIngridient","index","useDrop","accept","hover","monitor","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","getClientOffset","y","moveIngredient","drop","drag","burgerConstructorIngridientStyles","burgerConstructorIngridient","handleClose","secondId","text","thumbnail","BurgerConstructor","React","forwardRef","constructorIngridients","totalPrice","modalOrderDetailsOpened","bun","find","ingridient","otherIngridient","now","toString","Math","random","substr","dropTarget","useEffect","total","ids","constructorIngridientId","burgerConstructorStyles","burgerConstructor","burgerConstructor__wrapperMessage","burgerConstructor__wrapper","flexDirection","gap","burgerConstructor__bunIngridient","isLocked","burgerConstructor__mainIngridients","burgerConstructor__order","burgerConstructor__count","burgerConstructor__icon","ModalOverlay","modalOverlayStyles","modalOverlay","modalRoot","getElementById","Modal","onClose","children","Error","close","key","window","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","popup","modal","evt","stopPropagation","cross","OrderDetails","orderNumber","orderDetailsStyles","orderDetails","title","subtitle","icon","ConstructorPage","history","useHistory","buttonElement","DndProvider","backend","HTML5Backend","indridientId","currentTarget","length","orderIngredientsIds","number","getOrderNumber","push","IngredientDetails","clickedIngridient","setClickedIngridient","params","useParams","sortedIngridient","ingredientDetails","image_large","infoItems","infoItem","calories","proteins","fat","carbohydrates","IngredientDetailsPage","ingredientDetailsPage","OrderIngredientIcon","withNumber","mainCounter","st","imgContainer","img","getOrderTimeCreation","dateString","actualCompletionTime","orderDateTime","orderDate","differenceInDays","setHours","toLocaleDateString","Intl","RelativeTimeFormat","numeric","format","actualDateInformationStr","getHours","getMinutes","getTimezoneOffset","charAt","toUpperCase","slice","Order","userOrder","setTotal","iconIngredientsArray","setIconIngredientsArray","setMainCounter","feedIngredients","setFeedIngredients","dateOfCreate","setDateOfCreate","orderStatus","setClickedStatus","ingredients","i","reverse","feedIngredientsCutDublicate","createdAt","statusDone","statusPedding","nameStyle","order_link","order__meta","order__number","order__date","order__title","order__info","order__ingredients","order__cost","order__costNumber","order__icon","WS_CONNECTION_START","WS_CONNECTION_CLOSE","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_ALL_ORDERS","WS_USER_CONNECTION_START","WS_USER_CONNECTION_SUCCESS","WS_USER_CONNECTION_ERROR","WS_USER_CONNECTION_CLOSED","WS_GET_USER_ORDERS","FeedPage","ws","orders","totalToday","feed","feed__container","feed__orders","feed__info","feed__status","feed__statusContainer","feed__statusTitle","feed__statusList","feed__statusItem","feed__statusItemDone","feed__statistics","feed__statisticsTitle","feed__statisticsInfo","UserOrdersPage","menuContainer","menuInfo","ProtectedRoute","rest","render","OrderIngredientsDetails","clickedOrder","setClickedOrder","setCount","orderIngredients","setOrderIngredients","countNotUniqueIngredients","array","reduce","counter","idValue","sortedOrder","uniqIngredients","indexOf","ingredientName","priceWrapper","multiplier","footer","date","total–°ost","sum","orderIngredientsDetailsPage","App","ingridientsRequest","ingridientsFailed","appStyles","app","app__container","goBack","initialState","buns","otherIngridients","modalIngredientDetailsOpened","wsConnected","rootReducer","combineReducers","concat","sortIngridients","otherIngredientsSort","splice","payload","socketMiddleware","wsUrl","wsActions","store","socket","next","wsInit","wsClose","onOpen","onError","onMessage","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","wsAllOrdersActions","wsUserOrdersActions","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.4788ce65.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"number\":\"orderIngredientsDetails_number__2oVga\",\"statusDone\":\"orderIngredientsDetails_statusDone__1m91H\",\"statusPedding\":\"orderIngredientsDetails_statusPedding__UXPAB\",\"subtitle\":\"orderIngredientsDetails_subtitle__2Hak9\",\"orders\":\"orderIngredientsDetails_orders__3Z96E\",\"order\":\"orderIngredientsDetails_order__1zkY-\",\"imgContainer\":\"orderIngredientsDetails_imgContainer__35BjF\",\"img\":\"orderIngredientsDetails_img__2TVFx\",\"ingredientName\":\"orderIngredientsDetails_ingredientName__1H9jn\",\"priceWrapper\":\"orderIngredientsDetails_priceWrapper__2CmQX\",\"count\":\"orderIngredientsDetails_count__31bfl\",\"multiplier\":\"orderIngredientsDetails_multiplier__LvPMt\",\"price\":\"orderIngredientsDetails_price__3FoBW\",\"icon\":\"orderIngredientsDetails_icon__1Bjhp\",\"footer\":\"orderIngredientsDetails_footer__1xRTU\",\"total–°ost\":\"orderIngredientsDetails_total–°ost__KRyeO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructorIngridient\":\"burgerConstructorIngridient_burgerConstructorIngridient__Dqwf4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modalOverlay_modalOverlay__1kR9g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetailsPage\":\"ingredientDetailsPage_ingredientDetailsPage__jVVuF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orderIngredientsDetailsPage_container__1oX5r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"feed_feed__18GWp\",\"feed__container\":\"feed_feed__container__3dBcN\",\"feed__orders\":\"feed_feed__orders__1h7Jt\",\"feed__status\":\"feed_feed__status__mo3K_\",\"feed__statusContainer\":\"feed_feed__statusContainer__19_i7\",\"feed__statusTitle\":\"feed_feed__statusTitle__3tBSU\",\"feed__statusList\":\"feed_feed__statusList__PCc_b\",\"feed__statusItemDone\":\"feed_feed__statusItemDone__2xmsK\",\"feed__statisticsTitle\":\"feed_feed__statisticsTitle__10fd6\",\"feed__statisticsInfo\":\"feed_feed__statisticsInfo__1Dz3R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order_order__3S06G\",\"statusDone\":\"order_statusDone__2YVqi\",\"statusPedding\":\"order_statusPedding__23h_d\",\"order_link\":\"order_order_link__2T49g\",\"order__meta\":\"order_order__meta__3ULkJ\",\"order__title\":\"order_order__title__2v4lb\",\"order__info\":\"order_order__info__JoCKj\",\"order__cost\":\"order_order__cost__rGlxN\",\"order__costNumber\":\"order_order__costNumber__2PZvD\",\"order__icon\":\"order_order__icon__1C5BM\",\"order__ingredients\":\"order_order__ingredients__f96Zv\"};","import headerStyles from './appHeader.module.css';\n\nimport { Link, NavLink, useLocation } from 'react-router-dom';\n\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nconst AppHeader = () => {\n\n    const location = useLocation();\n\n    return (\n        <header className={headerStyles.header}>\n            <div className={headerStyles.container} >\n                <ul className={headerStyles.navigation}>\n                    <li className=\"mt-4 mb-4 mr-2 pr-5 pl-5 —Ö—É–π\">\n                        <NavLink to='/' \n                        exact={true}\n                        className={headerStyles.navigationLink}\n                        activeClassName={`${headerStyles.navigationLink__active}`}\n                        >\n                            <BurgerIcon type={location.pathname === \"/\" ? \"primary\" : \"secondary\"} />\n                            <p className={`text text_type_main-default text_color_inactive ml-2 ${headerStyles.linkText}`}>\n                                –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä\n                            </p>\n                        </NavLink>\n                    </li>\n                    <li className=\"mt-4 mb-4 pr-5 pl-5\">\n                        <NavLink to='/feed' \n                        exact={true}\n                        className={headerStyles.navigationLink}\n                        activeClassName={`${headerStyles.navigationLink__active}`}\n                        \n                        >\n                            <ListIcon type={location.pathname === \"/feed\" ? \"primary\" : \"secondary\"} />\n                            <p className={`text text_type_main-default text_color_inactive ml-2 ${headerStyles.linkText}`}>\n                                –õ–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–æ–≤\n                            </p>\n                        </NavLink>\n                    </li>\n                </ul>\n\n                <Link to='/'>\n                    <Logo />\n                </Link>\n\n                <NavLink to='/profile' \n                className={headerStyles.profile}\n                activeClassName={`${headerStyles.navigationLink__active}`}\n                >\n                    <ProfileIcon type={location.pathname === \"/profile\" || location.pathname === \"/profile/order\" ? \"primary\" : \"secondary\"} />\n                    <p className={`text text_type_main-default text_color_inactive ml-2 ${headerStyles.linkText}`}>\n                        –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç\n                    </p>\n                </NavLink>  \n            </div>\n        </header>\n    );\n}\n\nexport default AppHeader;","import {\n    TypedUseSelectorHook,\n    useDispatch as dispatchHook,\n    useSelector as selectorHook\n} from 'react-redux';\n  \nimport { AppDispatch, AppThunk, RootState } from '../actions/state';\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_START, WS_CONNECTION_SUCCESS, WS_GET_ALL_ORDERS, WS_GET_USER_ORDERS, WS_USER_CONNECTION_CLOSED, WS_USER_CONNECTION_ERROR, WS_USER_CONNECTION_START, WS_USER_CONNECTION_SUCCESS } from '../actions/ws';\n\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>(); \n\nexport type TItem = {\n  _id: string;\n  name: string;\n  type: string;\n  proteins: number;\n  fat: number;\n  carbohydrates: number;\n  calories: number;\n  price: number;\n  image: string;\n  image_mobile: string;\n  image_large: string;\n  __v: number;\n  secondId: string;\n}\n\nexport type TOrder = {\n  createdAt: string;\n  ingredients: string[];\n  name: string;\n  number: number;\n  status: string;\n  updatedAt: string;\n  _id: string;\n}\n\nexport type TIngredientsInitialState = {\n  ingridients: ReadonlyArray<TItem>;\n  ingridientsRequest: boolean;\n  ingridientsFailed: boolean;\n  modalIngredientDetailsOpened: boolean;\n  indridientId: string;\n}\n\nexport type TOrderInitialState = {\n  constructorIngridientsId: Array<string>;\n  constructorIngridients: ReadonlyArray<TItem>;\n  buns: ReadonlyArray<TItem>;\n  otherIngridients: ReadonlyArray<TItem>;\n  totalPrice: number;\n  modalOrderDetailsOpened: boolean;\n  orderNumber: string;\n}\n\nexport type TUserInitialState = {\n  user: null | {\n    name: string,\n    email: string\n  };\n}\n\nexport type TFeedState = {\n  wsConnected: boolean,\n  orders: Array<TOrder>,\n  total: number,\n  totalToday: number,\n}\n\nexport type TItemDrop = {\n  item: TItem\n}\n\nexport type TFunc = {\n  onClick: () => void;\n}\n\nexport type TFuncPreventDefault = {\n  onClick: (e: { preventDefault: () => void}) => void;\n}\n\nexport type TModalProps = {\n  onClose: () => void;\n} ;\n\nexport type TCount = {\n  [index: string]: number;\n}\n\nexport type TWsActionsAll = {\n  wsInit: typeof WS_CONNECTION_START | typeof WS_USER_CONNECTION_START,\n  wsClose: typeof WS_CONNECTION_CLOSE,\n  onOpen: typeof WS_CONNECTION_SUCCESS | typeof WS_USER_CONNECTION_SUCCESS,\n  onClose: typeof WS_CONNECTION_CLOSED | typeof WS_USER_CONNECTION_CLOSED,\n  onError: typeof WS_CONNECTION_ERROR | typeof WS_USER_CONNECTION_ERROR,\n  onMessage: typeof WS_GET_ALL_ORDERS | typeof WS_GET_USER_ORDERS,\n}","import { ThunkAction } from 'redux-thunk';\nimport { Action, ActionCreator } from 'redux';\n\nimport { store }  from '../store';\nimport { TIngredientActions } from '../reducers/state';\nimport { TUserActions } from '../reducers/user';\nimport { rootReducer } from '../reducers';\n\n// export type RootState = ReturnType<typeof store.getState>;\nexport type RootState = ReturnType<typeof rootReducer>;\n\ntype TApplicationActions = TIngredientActions | TUserActions; \n\nexport type AppThunk<ReturnType = void> = ActionCreator<\n  ThunkAction<ReturnType, Action, RootState, TApplicationActions>\n>; \n\nexport type AppDispatch = typeof store.dispatch; \n\nexport const GET_ALL_INGRIDIENTS_REQUEST: 'GET_ALL_INGRIDIENTS_REQUEST' = 'GET_ALL_INGRIDIENTS_REQUEST';\nexport const GET_ALL_INGRIDIENTS_SUCCESS: 'GET_ALL_INGRIDIENTS_SUCCESS' = 'GET_ALL_INGRIDIENTS_SUCCESS';\nexport const GET_ALL_INGRIDIENTS_FAILED: 'GET_ALL_INGRIDIENTS_FAILED' = 'GET_ALL_INGRIDIENTS_FAILED';\n\nexport const OPEN_INGRIDIENT_DATA: 'OPEN_INGRIDIENT_DATA' = 'OPEN_INGRIDIENT_DATA';\nexport const CLOSE_INGRIDIENT_DATA: 'CLOSE_INGRIDIENT_DATA' = 'CLOSE_INGRIDIENT_DATA';\n\n\nexport const BASE_URL = 'https://norma.nomoreparties.space/api';\n\nexport function checkResponse(res: Response) {\n  if (res.ok) {\n      return res.json();\n  }\n  return Promise.reject(`–û—à–∏–±–∫–∞ ${res.status}`);\n}\n\nexport const getAllIngridients: AppThunk = () => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/ingredients`)\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        dispatch({\n          type: GET_ALL_INGRIDIENTS_SUCCESS,\n          ingridients: res.data,\n          ingridientsRequest: false,\n          ingridientsFailed: false,\n        })\n      } else {\n        dispatch({\n          type: GET_ALL_INGRIDIENTS_FAILED,\n          ingridientsFailed: true, \n          ingridientsRequest: false \n        })\n      }\n    }).catch( err => {\n\n      console.log(err)\n      dispatch({\n          type: GET_ALL_INGRIDIENTS_FAILED,\n          ingridientsFailed: true, \n          ingridientsRequest: false \n      })\n    })\n  }","import { AppDispatch, AppThunk, BASE_URL, checkResponse } from \"./state\";\n\nexport const GET_USER: 'GET_USER' = 'GET_USER';\nexport const CLEAN_USER: 'CLEAN_USER' = 'CLEAN_USER';\n\nexport function setCookie(name: string, value: string | boolean , props?: any) {\n  // props = props || {};\n  props = {\n    path: '/',\n    ...props\n  }\n\n\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n} \n\nexport function getCookie(name: string ) {\n  const matches = document.cookie.match(\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n} \n\nexport function deleteCookie(name: string) {\n  setCookie(name, false, { expires: -1 });\n}\n\nexport const createUser: AppThunk = (form) => \n  (dispatch: AppDispatch) => {\n    return fetch(`${BASE_URL}/auth/register`, {\n                    method: 'POST',\n                    headers: {\n                      'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify(form)\n                  })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        const authToken = res.accessToken.split('Bearer ')[1];\n\n        setCookie('token', authToken);\n        setCookie('refreshToken', res.refreshToken);\n\n        dispatch({\n          type: GET_USER,\n          email: res.user.email,\n          name: res.user.name\n        })\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n\n  export const logIn: AppThunk = (data: {email: string, password: string }) => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/auth/login`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(data)\n            })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        const authToken = res.accessToken.split('Bearer ')[1];\n\n        setCookie('token', authToken);\n        setCookie('refreshToken', res.refreshToken);\n\n        dispatch({\n          type: GET_USER,\n          email: res.user.email,\n          name: res.user.name\n        })\n      } \n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  export const logOut: AppThunk = (refreshToken: string) =>\n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/auth/logout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"token\": `${refreshToken}`\n    } )\n    })\n    .then(checkResponse)\n    .then(res => {\n      dispatch({\n        type: CLEAN_USER,\n        user: null\n      })\n      deleteCookie('token');\n      deleteCookie('refreshToken');\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  export const getUserInfo: AppThunk = (accessToken: string, refreshToken: string) => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/auth/user`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': accessToken ? accessToken : ''\n      },\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(res.json());\n      })\n    .then(res => {\n      if (res && res.success) {\n        dispatch({\n          type: GET_USER,\n          email: res.user.email,\n          name: res.user.name\n        })\n      } \n    })\n    .catch((err) => {\n      return err\n    })\n    .then((err) => {\n      if (err && err.message === 'jwt expired') {\n        fetch(`${BASE_URL}/auth/token`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            \"token\": `${refreshToken}`\n        } )\n        })\n        .then(checkResponse)\n        .then((res) => {\n          const authToken = res.accessToken.split('Bearer ')[1];\n          const refToken = res.refreshToken;\n\n          setCookie('token', authToken);\n          setCookie('refreshToken', res.refreshToken);\n          return getUserInfo(authToken, refToken)\n        })\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n\n  export const changeUserData: AppThunk = (accessToken: string, data: {email: string, password: string,  name: string}) => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/auth/user`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': accessToken ? accessToken : ''\n      },\n      body: JSON.stringify(data)\n    })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        dispatch({\n          type: GET_USER,\n          email: res.user.email,\n          name: res.user.name\n        })\n      } \n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  export const getResetPasswordCode: AppThunk = (email: {email: string;}, setSuccess) => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/password-reset`, {\n                      method: 'POST',\n                      headers: {\n                          'Content-Type': 'application/json'\n                          },\n                      body: JSON.stringify(email)\n                  })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        setSuccess(true);\n      } \n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n\n  export const resetPassword: AppThunk = (data: {password: string, token: string }) => \n  (dispatch: AppDispatch) => {\n    fetch(`${BASE_URL}/password-reset/reset`, {\n                      method: 'POST',\n                      headers: {\n                          'Content-Type': 'application/json'\n                          },\n                      body: JSON.stringify(data)\n                  })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {  \n        console.log(res)\n      } \n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  };\n","import  { ChangeEvent, useState }  from 'react';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\n\nimport loginStyles from './login.module.css';\n\nimport { Button, EmailInput, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport { useSelector, useDispatch } from '../../services/types/types';\n\nimport { logIn } from '../../services/actions/user';\n\n\nconst LoginPage = () => {\n\n    const dispatch = useDispatch();\n    const location = useLocation();\n\n    const state: any = location.state\n\n    const { user }  = useSelector(state => state.user);\n\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n\n    const onEmailChange = (e: ChangeEvent<HTMLInputElement>): void => {\n        setEmail(e.target.value)\n    }\n\n    const onPasswordChange = (e: ChangeEvent<HTMLInputElement>): void => {\n        setPassword(e.target.value)\n    }\n\n    const authorization = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n\n        const data = {\n            \"email\": email,\n            \"password\": password\n        }\n        dispatch(logIn(data));\n    }\n\n    if (user) {\n        return (\n          <Redirect\n            to={state?.from  || '/'}\n          />\n        );\n    }\n\n    return (\n        <div className={loginStyles.login}>\n            <h1 className={`text text_type_main-medium mb-6 ${loginStyles.login__title}`}>\n                –í—Ö–æ–¥\n            </h1>\n            <form onSubmit={authorization} action=\"#\" className={`mb-20 ${loginStyles.login__form}`}>\n                <div className={`mb-6 ${loginStyles.login__input}`}>\n                    <EmailInput onChange={onEmailChange} value={email} name={'email'} />\n                </div>\n\n                <div className={`mb-6 ${loginStyles.login__input}`}>\n                    <PasswordInput onChange={onPasswordChange} value={password} name={'password'} />\n                </div>\n\n                <Button type=\"primary\" size=\"medium\">\n                    –í–æ–π—Ç–∏\n                </Button>\n            </form>\n            \n            <div className={`mb-4 ${loginStyles.login__wrapper}`}>\n                <span className={`mr-2 text text_type_main-default text_color_inactive`}>\n                    –í—ã ‚Äî –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?\n                </span>\n                <Link to='/register' className={`text text_type_main-default ${loginStyles.login__link}`} >–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</Link>\n            </div>\n\n            <div className={`${loginStyles.login__wrapper}`}>\n                <span className={`mr-2 text text_type_main-default text_color_inactive`}>\n                    –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?  \n                </span>\n                <Link to='/forgot-password' className={`text text_type_main-default ${loginStyles.login__link}`} >–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</Link>\n            </div>\n        </div>\n    )\n}\n  \nexport default LoginPage;\n\n\n","import  { useState, useCallback }  from 'react';\nimport { Link, Redirect } from 'react-router-dom';\n\nimport registrationStyles from './registration.module.css';\n\nimport { Button, EmailInput, Input, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useSelector, useDispatch } from '../../services/types/types';\nimport { createUser } from '../../services/actions/user';\n\n\nconst RegistarationPage = () => {\n\n    const { user }  = useSelector(state => state.user);\n\n    const dispatch = useDispatch();\n\n\n    const [form, setValue] = useState({ email: \"\", password: \"\", name: \"\" });\n\n\n    const onChange = (e: { target: { name: string; value: string; }; }) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n    };\n\n    let onRegistration = useCallback(\n        e => {\n          e.preventDefault();\n          dispatch(createUser(form));\n        },\n        [dispatch, form]\n    );\n\n    if (user) {\n        return (\n          <Redirect\n            to={{\n              pathname: '/'\n            }}\n          />\n        );\n    }\n\n    return (\n        <div className={registrationStyles.registration}>\n            <h1 className={`text text_type_main-medium mb-6 ${registrationStyles.registration__title}`}>\n                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\n            </h1>\n            <form onSubmit={onRegistration} action=\"#\" className={`mb-20 ${registrationStyles.registration__form}`}>\n\n                <div className={`mb-6 ${registrationStyles.registration__input}`}>\n                    <Input\n                        type={'text'}\n                        placeholder={'–ò–º—è'}\n                        onChange={onChange}\n                        value={form.name}\n                        name={'name'}\n                        error={false}\n                        errorText={'–û—à–∏–±–∫–∞'}\n                        size={'default'}\n                    />\n                </div>\n\n                <div className={`mb-6 ${registrationStyles.registration__input}`}>\n                    <EmailInput onChange={onChange} value={form.email} name={'email'} />\n                </div>\n\n                <div className={`mb-6 ${registrationStyles.registration__input}`}>\n                    <PasswordInput onChange={onChange} value={form.password} name={'password'} />\n                </div>\n\n                <Button type=\"primary\" size=\"medium\">\n                    –í–æ–π—Ç–∏\n                </Button>\n            </form>\n\n            <div className={`${registrationStyles.registration__wrapper}`}>\n                <span className={`mr-2 text text_type_main-default text_color_inactive`}>\n                    –£–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã? \n                </span>\n                <Link to='/login' className={`text text_type_main-default ${registrationStyles.registration__link}`} >–í–æ–π—Ç–∏</Link>\n            </div>\n        </div>\n    )\n}\n  \nexport default RegistarationPage;\n\n\n","import  { ChangeEvent, useState }  from 'react';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\n\nimport forgotStyles from './forgot.module.css';\n\nimport { Button, EmailInput } from '@ya.praktikum/react-developer-burger-ui-components'\n\n\n\nimport { getResetPasswordCode } from '../../services/actions/user';\n\nimport { useSelector, useDispatch } from '../../services/types/types';\n\n\n\nconst RegistarationPage = () => {\n\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    const state: any = location.state\n\n    const { user }  = useSelector(state => state.user);\n\n    const [emailValue, setEmailValue] = useState('');\n    const [success, setSuccess] = useState(false);\n\n    const onEmailChange = (e: ChangeEvent<HTMLInputElement>): void => {\n        setEmailValue(e.target.value)\n    }\n\n    const onSubmit = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n        const email = { \n            \"email\": emailValue\n        };\n        dispatch(getResetPasswordCode(email, setSuccess))\n    }\n\n    if(success) {\n        return (\n        <Redirect\n            to={{\n                pathname: '/reset-password',\n                state: { from: location }\n              }}\n        />);\n    }\n\n    if (user) {\n        return (\n            <Redirect\n                to={state?.from  || '/'}\n            />\n        );\n    }\n\n    return (\n        <div className={forgotStyles.forgot}>\n            <h1 className={`text text_type_main-medium mb-6 ${forgotStyles.forgot__title}`}>\n                –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è\n            </h1>\n            <form onSubmit={onSubmit} action=\"#\" className={`mb-20 ${forgotStyles.forgot__form}`}>\n\n                <div className={`mb-6 ${forgotStyles.forgot__input}`}>\n                    <EmailInput onChange={onEmailChange} value={emailValue} name={'email'} />\n                </div>\n\n                <Button type=\"primary\" size=\"medium\">\n                    –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å\n                </Button>\n            </form>\n\n            <div className={`${forgotStyles.forgot__wrapper}`}>\n                <span className={`mr-2 text text_type_main-default text_color_inactive`}>\n                    –í—Å–ø–æ–º–Ω–∏–ª–∏ –ø–∞—Ä–æ–ª—å?\n                </span>\n                <Link to='/login' className={`text text_type_main-default ${forgotStyles.forgot__link}`} >–í–æ–π—Ç–∏</Link>\n            </div>\n        </div>\n    )\n}\n  \nexport default RegistarationPage;\n\n\n","import  { ChangeEvent, useState }  from 'react';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\n\nimport resetStyles from './reset.module.css';\n\nimport { Button, Input, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { resetPassword } from '../../services/actions/user';\n\nimport { useSelector, useDispatch } from '../../services/types/types';\n\nconst ResetPasswordPage = () => {\n\n    const location = useLocation();\n    const state: any = location.state;\n\n    const { user }  = useSelector(state => state.user);\n\n    const [passwordValue, setPasswordValue] = useState('')\n    const [codeValue, setCodeValue] = useState('')\n\n    const dispatch = useDispatch();\n\n    const onPasswordChange = (e: ChangeEvent<HTMLInputElement>): void => {\n        setPasswordValue(e.target.value)\n    }\n\n    const onCodeChange = (e: ChangeEvent<HTMLInputElement>): void => {\n        setCodeValue(e.target.value)\n    }\n\n    const onReset = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n        \n        const data = {\n            \"password\": passwordValue,\n            \"token\": codeValue\n        }\n        \n        dispatch(resetPassword(data))\n\n        setPasswordValue('')\n        setCodeValue('')\n    }\n\n    if (user) {\n        return (\n          <Redirect\n            to={{\n              pathname: '/'\n            }}\n          />\n        );\n    }\n\n    if (state?.from.pathname !== '/forgot-password') {\n        return (\n          <Redirect\n            to={{\n              pathname: '/login'\n            }}\n          />\n        );\n    }\n\n    return (\n        <div className={resetStyles.reset}>\n            <h1 className={`text text_type_main-medium mb-6 ${resetStyles.reset__title}`}>\n                –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è\n            </h1>\n            <form onSubmit={onReset} action=\"#\" className={`mb-20 ${resetStyles.reset__form}`}>\n\n                <div className={`mb-6 ${resetStyles.reset__input}`}>\n                    <PasswordInput onChange={onPasswordChange} value={passwordValue} name={'password'} />\n                </div>\n\n                <div className={`mb-6 ${resetStyles.reset__input}`}>\n                <Input\n                        type={'text'}\n                        placeholder={'–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –ø–∏—Å—å–º–∞'}\n                        onChange={onCodeChange}\n                        value={codeValue}\n                        name={'code'}\n                        error={false}\n                        errorText={'–û—à–∏–±–∫–∞'}\n                        size={'default'}\n                    />\n                </div>\n\n                <Button type=\"primary\" size=\"medium\">\n                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n                </Button>\n            </form>\n\n            <div className={`${resetStyles.reset__wrapper}`}>\n                <span className={`mr-2 text text_type_main-default text_color_inactive`}>\n                    –í—Å–ø–æ–º–Ω–∏–ª–∏ –ø–∞—Ä–æ–ª—å?\n                </span>\n                <Link to='/login' className={`text text_type_main-default ${resetStyles.reset__link}`} >–í–æ–π—Ç–∏</Link>\n            </div>\n        </div>\n    )\n}\n  \nexport default ResetPasswordPage;\n\n\n","import menuStyles from './asideMenu.module.css';\n\nimport { NavLink } from 'react-router-dom';\nimport { useDispatch } from '../../services/types/types';\n\nimport { getCookie, logOut } from '../../services/actions/user';\n\n\nconst AsideMenu = () => {\n\n    const dispatch = useDispatch();\n\n    const out = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n\n        const refreshToken = getCookie('refreshToken');\n        \n        dispatch(logOut(refreshToken))\n    }\n\n    return (\n        <ul className={`mr-15 pl-5 ${menuStyles.menu}`}>\n            <li className={`${menuStyles.menu__item}`}>\n                <NavLink\n                    exact={true}\n                    to='/profile'\n                    className={`text text_type_main-medium ${menuStyles.menu__link}`}\n                    activeClassName={`${menuStyles.menu__linkActive}`}\n                >\n                    –ü—Ä–æ—Ñ–∏–ª—å\n                </NavLink>\n            </li>\n            <li className={`${menuStyles.menu__item}`}>\n                <NavLink\n                    exact={true}\n                    to='/profile/order'\n                    className={`text text_type_main-medium ${menuStyles.menu__link}`}\n                    activeClassName={`${menuStyles.menu__linkActive}`}\n                >\n                    –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤\n                </NavLink>\n            </li>\n            <li className={`text text_type_main-medium ${menuStyles.menu__item}`}>\n                <NavLink\n                    to='/login'\n                    className={`text text_type_main-medium ${menuStyles.menu__link}`}\n                    activeClassName={`${menuStyles.menu__linkActive}`}\n                    onClick={out}\n                >\n                    –í—ã—Ö–æ–¥\n                </NavLink>\n            </li>\n        </ul>\n    )\n}\n\nexport default AsideMenu;\n","import  { useState }  from 'react';\n\n\nimport profileStyles from './profile.module.css';\n\nimport { Button, Input, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useSelector, useDispatch } from '../../services/types/types';\n\nimport AsideMenu from '../../components/asideMenu/asideMenu';\nimport { changeUserData, getCookie } from '../../services/actions/user';\n\nconst ProfilePage = () => {\n\n    const { user }  = useSelector(state => state.user);\n\n    const [form, setValue] = useState({ name: user ? user.name : \"\", email: user ? user.email : \"\", password: \"\" }) ;\n\n    const [actionButtonsActive, setActionButtonsActive] = useState(false)\n\n    const onChange = (e: { target: { name: string; value: string; }; }) => {\n        setValue({ ...form, [e.target.name]: e.target.value });\n        setActionButtonsActive(true)\n    };\n\n    const dispatch = useDispatch();\n\n    const returnValue = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n\n        setValue({ name: user ? user.name : \"\", email: user ? user.email : \"\", password: \"\" });\n    }\n\n    const onChangeUserData = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n        \n        const token = 'Bearer ' + getCookie('token');\n\n        dispatch(changeUserData(token, form))\n\n        console.log('ss')\n    }\n\n    const actionsButtonActive = (isActive: boolean) => isActive ? \n        <div className={`${profileStyles.profile__formActions}`}>\n            <Button onClick={returnValue} type=\"secondary\" size=\"medium\">\n                –û—Ç–º–µ–Ω–∞\n            </Button>\n\n            <Button type=\"primary\" size=\"medium\">\n                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n            </Button>\n        </div>\n     : null;\n\n\n    const actionsButtonRender = actionsButtonActive(actionButtonsActive);\n    return (\n        <div className={profileStyles.profile}>\n            <div className={profileStyles.profile__menu}>\n                <AsideMenu />\n\n                <div className={`mt-20 pl-5 ${profileStyles.profile__info}`}>\n                    <span className={`text text_type_main-default text_color_inactive ${profileStyles.profile__infoItem}`}>\n                        –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n                    </span>\n                </div>\n            </div>\n            \n            <form onSubmit={onChangeUserData} action=\"#\" className={`${profileStyles.profile__form}`}>\n                <div className={`mb-6 ${profileStyles.profile__input}`}>\n                    <Input\n                        type={'text'}\n                        placeholder={'–ò–º—è'}\n                        onChange={onChange}\n                        value={form.name}\n                        name={'name'}\n                        error={false}\n                        errorText={'–û—à–∏–±–∫–∞'}\n                        size={'default'}\n                    />\n                </div>\n\n                <div className={`mb-6 ${profileStyles.profile__input}`}>\n                    <Input\n                        type={'text'}\n                        placeholder={'–õ–æ–≥–∏–Ω'}\n                        onChange={onChange}\n                        value={form.email}\n                        name={'email'}\n                        error={false}\n                        errorText={'–û—à–∏–±–∫–∞'}\n                        size={'default'}\n                    />\n                </div>\n\n                <div className={`mb-6 ${profileStyles.profile__input}`}>\n                    <PasswordInput onChange={onChange} value={form.password} name={'password'} />\n                </div>\n\n                { actionsButtonRender }\n            </form>\n        </div>\n    )\n}\n  \nexport default ProfilePage;\n\n","import React, { FC }  from 'react';\nimport { useDrag } from \"react-dnd\";\nimport burgerIngredientStyles from './burgerIngredient.module.css';\n\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport { useSelector } from '../../services/types/types';\n\nimport { TItem } from '../../services/types/types';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst BurgerIngredient: FC<{\n    onClick(event: React.MouseEvent<HTMLLIElement>): void\n    item: TItem;\n    id: string;\n}> = ({onClick, item, id}) => {\n    const { constructorIngridientsId }  = useSelector(state => state.order);\n\n    let location = useLocation();\n\n    function getCount(ingredient: TItem) {\n        let count = 0;\n\n        constructorIngridientsId.forEach((id: string) => {\n            if (id === ingredient._id) {\n                if(ingredient.type === \"bun\") {\n                    count = 2\n                } else {\n                    count += 1\n                }\n            }\n        })\n\n        return count;\n    }\n\n    const [, dragRef] = useDrag({\n        type: \"ingredient\",\n        item: {item}\n    });\n\n    return (\n        <Link to={{\n            pathname: `ingredients/${id}`,\n            state: {background: location}\n          }}\n          className={`${burgerIngredientStyles.burgerIngredient}`}>\n            <li ref={dragRef} onClick={onClick} key={item._id} id={id} className={`mr-2 ml-2 ${burgerIngredientStyles.burgerIngredient__item}`} >\n                <Counter count={getCount(item)} size=\"default\" />\n                <img className=\"mr-4 ml-4 mb-2\" src={item.image} alt={item.name} />\n                <div className={`mb-2 ${burgerIngredientStyles.burgerIngredient__price}`}>\n                    <p className={`mr-2 text text_type_digits-default`}>{item.price}</p>\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n                <p className=\"mb-8 text text_type_main-default\">{item.name}</p>\n            </li>\n        </Link>\n    );\n}\n\nexport default BurgerIngredient;","import React, { useState, useRef, FC } from 'react';\n\nimport burgerIngredientsStyles from './burgerIngredients.module.css';\n\nimport BurgerIngredient from '../burgerIngredient/burgerIngredient';\n\nimport { Tab} from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport { useSelector } from '../../services/types/types';\n\nconst BurgerIngredients: FC<{\n    onClick(event: React.MouseEvent<HTMLLIElement>): void;\n}> = ({onClick}) => {\n    const [current, setCurrent] = useState('one');\n\n    const { ingridients } = useSelector(state => state.ingridients);\n\n    const refBun = useRef<HTMLDivElement>(null);\n    const refSauce = useRef<HTMLDivElement>(null);\n    const refMain = useRef<HTMLDivElement>(null);\n\n    const scrollTab = (e: React.MouseEvent<HTMLDivElement> & { target: { getBoundingClientRect: () => { (): any; new(): any; top: any; }; }; }) => {\n        const listTop = e.target.getBoundingClientRect().top;\n\n        const bunTop = refBun.current!.getBoundingClientRect().top;\n        const bunBottom = refBun.current!.getBoundingClientRect().bottom;\n        const sauceTop = refSauce.current!.getBoundingClientRect().top;\n        const sauceBottom = refSauce.current!.getBoundingClientRect().bottom;\n        const mainTop = refMain.current!.getBoundingClientRect().top;\n        const mainBottom = refMain.current!.getBoundingClientRect().bottom;\n\n        if (listTop >= bunTop && listTop < bunBottom) {\n            setCurrent('one');\n        } else if (listTop >= sauceTop && listTop < sauceBottom) {\n            setCurrent('two');\n        } else if (listTop >= mainTop && listTop < mainBottom) {\n            setCurrent('three');\n        }\n    }\n\n    return (\n        <section className={`mr-10 ml-5 ${burgerIngredientsStyles.burgerIngredients} `}>\n            <h1 className=\"mt-10 mb-5 text text_type_main-large\">–°–æ–±–µ—Ä–∏—Ç–µ –±—É—Ä–≥–µ—Ä</h1>\n            <div style={{ display: 'flex' }}>\n                <Tab value=\"one\" active={current === 'one'} onClick={(value) => {\n                    setCurrent(value);\n                    refBun.current?.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    –ë—É–ª–∫–∏\n                </Tab>\n                <Tab value=\"two\" active={current === 'two'} onClick={(value) => {\n                    setCurrent(value);\n                    refSauce.current?.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    –°–æ—É—Å—ã\n                </Tab>\n                <Tab value=\"three\" active={current === 'three'} onClick={(value) => {\n                    setCurrent(value);\n                    refMain.current?.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    –ù–∞—á–∏–Ω–∫–∏\n                </Tab>\n            </div>\n\n            <div className={`${burgerIngredientsStyles.burgerIngredients__scrollWrapper}`} onScroll={scrollTab}>\n                <div ref={refBun} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 1`}>–ë—É–ª–∫–∏</h2>\n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter((item) => item.type === \"bun\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))} \n                    </ul>\n                </div>\n\n                <div ref={refSauce} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 2`}>–°–æ—É—Å—ã</h2>                \n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter((item) => item.type === \"sauce\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))}\n                    </ul> \n                </div>\n\n                <div ref={refMain} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 3`}>–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–≥—Ä–∏–¥–∏–µ–Ω—Ç—ã</h2>                \n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter((item) => item.type === \"main\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))}\n                    </ul> \n                </div>\n            </div>\n        </section>\n    );\n}\n\nexport default BurgerIngredients;","import { AppDispatch, AppThunk, BASE_URL, checkResponse } from \"./state\";\nimport { getCookie } from \"./user\";\n\nexport const GET_ORDER_NUMBER_SUCCESS: 'GET_ORDER_NUMBER_SUCCESS' = 'GET_ORDER_NUMBER_SUCCESS';\nexport const GET_ORDER_NUMBER_FAILED: 'GET_ORDER_NUMBER_FAILED' = 'GET_ORDER_NUMBER_FAILED';\n\nexport const GET_INGRIDIENTS_IDS: 'GET_INGRIDIENTS_IDS' = 'GET_INGRIDIENTS_IDS';\nexport const GET_INGRIDIENTS_CONSTRUCTOR: 'GET_INGRIDIENTS_CONSTRUCTOR' = 'GET_INGRIDIENTS_CONSTRUCTOR';\nexport const GET_BUN_CONSTRUCTOR: 'GET_BUN_CONSTRUCTOR' = 'GET_BUN_CONSTRUCTOR';\nexport const GET_OTHER_INGRIDIENTS_CONSTRUCTOR: 'GET_OTHER_INGRIDIENTS_CONSTRUCTOR' = 'GET_OTHER_INGRIDIENTS_CONSTRUCTOR';\n\nexport const DELETE_INGRIDIENT: 'DELETE_INGRIDIENT' = 'DELETE_INGRIDIENT';\n\nexport const GET_TOTAL_PRICE: 'GET_TOTAL_PRICE' = 'GET_TOTAL_PRICE';\n\nexport const OPEN_ORDER_DATA: 'OPEN_ORDER_DATA' = 'OPEN_ORDER_DATA';\nexport const CLOSE_ORDER_DATA: 'CLOSE_ORDER_DATA' = 'CLOSE_ORDER_DATA';\n\nexport const GET_ORDER_NUMBER: 'GET_ORDER_NUMBER' = 'GET_ORDER_NUMBER';\nexport const CONSTRUCTOR_INGREDIENTS_SORT: 'CONSTRUCTOR_INGREDIENTS_SORT' = 'CONSTRUCTOR_INGREDIENTS_SORT';\nexport const CLEAR_CONSTRUCTOR: 'CLEAR_CONSTRUCTOR' = 'CLEAR_CONSTRUCTOR';\n\nconst accessToken = 'Bearer ' + getCookie('token');\n\nexport const getOrderNumber: AppThunk = ( orderIngredientsIds: {ingredients: string[];}) => \n(dispatch: AppDispatch) => {\n  fetch(`${BASE_URL}/orders`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'authorization': accessToken ? accessToken : ''\n                        },\n                    body: JSON.stringify(orderIngredientsIds)\n                })\n  .then(checkResponse)\n  .then(res => {\n    if (res && res.success) {\n      dispatch({\n        type: GET_ORDER_NUMBER_SUCCESS,\n        orderNumber: res.order.number\n      })\n    } else {\n      dispatch({\n        type: GET_ORDER_NUMBER_FAILED\n      })\n    }\n  }).catch( () => {\n    dispatch({\n        type: GET_ORDER_NUMBER_FAILED\n    })\n  })\n};","import { useRef, FC }  from 'react';\nimport { useDrop, useDrag } from \"react-dnd\";\n\nimport burgerConstructorIngridientStyles from './burgerConstructorIngridient.module.css';\n\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useDispatch } from '../../services/types/types';\n\nimport { \n    GET_INGRIDIENTS_CONSTRUCTOR,\n    CONSTRUCTOR_INGREDIENTS_SORT\n} from '../../services/actions/order';\n\nimport { TItem } from '../../services/types/types';\n\nconst BurgerConstructorIngridient: FC<{\n    deleteIngridient(secondId: string, id: string): void;\n    item: TItem;\n    id: string,\n    index: number\n}> = ({deleteIngridient, item, id, index}) => {\n\n    const dispatch = useDispatch();\n\n    const moveIngredient = (dragIndex: number, hoverIndex: number) => {\n        dispatch({\n            type: CONSTRUCTOR_INGREDIENTS_SORT,\n            dragIndex,\n            hoverIndex\n        });\n        \n        dispatch({\n            type: GET_INGRIDIENTS_CONSTRUCTOR,\n        });\n    };\n\n    const ref = useRef<HTMLLIElement>(null);\n\n    const [, drop] = useDrop({\n        accept: 'sortIngridients-item',\n        hover(item: {index: number}, monitor) {\n            if (!ref.current) {\n                return;\n            }\n            const dragIndex = item.index;\n            const hoverIndex = index;\n            if (dragIndex === hoverIndex) {\n                return;\n            }\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n            const clientOffset = monitor.getClientOffset();\n            const hoverClientY = clientOffset!.y - hoverBoundingRect.top;\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return;\n            }\n\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return;\n            }\n\n            moveIngredient(dragIndex, hoverIndex);\n\n            item.index = hoverIndex;\n        },\n    });\n\n    const [, drag] = useDrag({\n        type: 'sortIngridients-item',\n        item: () => {\n            return { id, index };\n        },\n    });\n\n    drag(drop(ref));\n\n    return (\n        <li ref={ref} className={`${burgerConstructorIngridientStyles.burgerConstructorIngridient}`} >\n            <DragIcon  type=\"primary\" />\n            <ConstructorElement\n                handleClose={() => {\n                    deleteIngridient(item.secondId, item._id)\n                }}\n                text={`${item.name}`}\n                price={item.price}\n                thumbnail={`${item.image}`}\n            />\n        </li>\n    );\n};\n\nexport default BurgerConstructorIngridient;","import React, { useEffect }  from 'react';\nimport { useDrop } from \"react-dnd\";\n\nimport burgerConstructorStyles from './burgerConstructor.module.css';\n\nimport BurgerConstructorIngridient from '../burgerConstructorIngridient/burgerConstructorIngridient';\n\nimport { ConstructorElement, CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useSelector, useDispatch, TFuncPreventDefault, TItemDrop } from '../../services/types/types';\n\nimport { \n    GET_TOTAL_PRICE, \n    DELETE_INGRIDIENT, \n    GET_INGRIDIENTS_IDS,\n    GET_BUN_CONSTRUCTOR,\n    GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n    GET_INGRIDIENTS_CONSTRUCTOR \n} from '../../services/actions/order';\n\nconst BurgerConstructor = React.forwardRef<HTMLDivElement, TFuncPreventDefault>(({onClick}, ref) => {\n\n    const { ingridients }  = useSelector(state => state.ingridients);\n    const { constructorIngridients }  = useSelector(state => state.order);\n    const { totalPrice }  = useSelector(state => state.order);\n    const { modalOrderDetailsOpened }  = useSelector(state => state.order);\n\n    const dispatch = useDispatch();\n\n    const bun = constructorIngridients.find((item: { type: string; }) => item.type === \"bun\");\n\n    function deleteIngridient(secondId: string, id: string) {\n        dispatch({\n            type: DELETE_INGRIDIENT,\n            secondId,\n            id\n        });\n    } \n\n    const draggableIngredient = (id: string) => {\n        ingridients.forEach((ingridient: { _id: string; type: string; }) => {\n            if (ingridient._id === id) {\n\n                 if (ingridient.type === 'bun') {\n                    dispatch({\n                        type: GET_BUN_CONSTRUCTOR,\n                        bun: ingridient\n                    });\n\n                    dispatch({\n                        type: GET_INGRIDIENTS_CONSTRUCTOR,\n                    });\n                } else if (constructorIngridients[0]) {\n                    const uid = () => Date.now().toString(36) + Math.random().toString(36).substr(2);\n\n                    dispatch({\n                        type: GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n                        otherIngridient: {...ingridient, secondId: uid()}\n                    });\n\n                    dispatch({\n                        type: GET_INGRIDIENTS_CONSTRUCTOR,\n                    });\n                }\n            }\n        })\n    }\n\n    const [, dropTarget] = useDrop({\n        accept: \"ingredient\",\n        drop({item}: TItemDrop) {\n            draggableIngredient(item._id)\n        },\n    });\n\n    useEffect(\n        () => {\n            let total = 0;\n            constructorIngridients.map((item) => (total += item.price));\n            dispatch({\n                type: GET_TOTAL_PRICE,\n                totalPrice: total\n            });\n\n            let ids: string[] = []\n            constructorIngridients.forEach((ingridient: { _id: string; }, index: number) => {\n                ids[index] = ingridient._id\n            })\n\n            dispatch({\n                type: GET_INGRIDIENTS_IDS,\n                constructorIngridientId: ids\n            });\n        },\n        [dispatch, constructorIngridients]\n    );\n\n    return (\n        <section className={`pt-25 ${burgerConstructorStyles.burgerConstructor} `}>\n            {modalOrderDetailsOpened ? \n            <div className={`text text_type_main-large ${burgerConstructorStyles.burgerConstructor__wrapperMessage} `}>\n                <span className={`text text_type_main-large`}>\n                    –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç\n                </span>\n                \n            </div>\n            :\n            <div ref={dropTarget} className={`${burgerConstructorStyles.burgerConstructor__wrapper} `} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>  \n                {bun && <div className={`pl-8 pr-4 ${burgerConstructorStyles.burgerConstructor__bunIngridient} `}>\n                    <ConstructorElement\n                        key={bun.secondId}\n                        type=\"top\"\n                        isLocked={true}\n                        text={`${bun.name} (–≤–µ—Ä—Ö)`}\n                        price={bun.price}\n                        thumbnail={`${bun.image}`}\n                    />\n                    \n                </div>}\n                { ingridients && <ul className={`pr-2 ${burgerConstructorStyles.burgerConstructor__mainIngridients} `}>\n                    {constructorIngridients.filter((item) => item.type === \"main\" || item.type === \"sauce\").map((item, index) => (\n                        <BurgerConstructorIngridient item={item} deleteIngridient={deleteIngridient} key={item.secondId} index={index} id={item._id}/>\n                    ))}\n                </ul> }\n\n                {bun && <div className={`pl-8 pr-4 ${burgerConstructorStyles.burgerConstructor__bunIngridient} `}>\n                        <ConstructorElement\n                            key={bun.secondId}\n                            type=\"bottom\"\n                            isLocked={true}\n                            text={`${bun.name} (–Ω–∏–∑)`}\n                            price={bun.price}\n                            thumbnail={`${bun.image}`}\n                        />\n                </div>}\n            </div>\n            }\n            \n            <div className={`pr-4 mt-10 ${burgerConstructorStyles.burgerConstructor__order}`}>\n               {totalPrice && <p className={`text text_type_digits-default ${burgerConstructorStyles.burgerConstructor__count}`}>{totalPrice}</p>}\n                <div className={`mr-10 ${burgerConstructorStyles.burgerConstructor__icon}`}>\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n\n                <div ref={ref}>\n                    <Button onClick={onClick} type=\"primary\" size=\"large\">\n                        –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑\n                    </Button>\n                </div>\n                \n            </div>\n        </section>\n    );\n});\n\nexport default BurgerConstructor;","import modalOverlayStyles from './modalOverlay.module.css';\n\nconst ModalOverlay = () => {\n    return (\n        <div className={modalOverlayStyles.modalOverlay}></div>\n    )\n}\n\nexport default ModalOverlay;","import ReactDOM from 'react-dom'\n\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport modalStyles from './modal.module.css';\n\nimport ModalOverlay from '../modalOverlay/modalOverlay';\n\nimport { FC, useEffect } from 'react';\n\nimport { TModalProps } from '../../services/types/types';\n\nconst modalRoot = document.getElementById(\"react-modals\");\n\nconst Modal: FC<TModalProps> = ({onClose, children}) => {\n\n  if (!modalRoot) {\n    throw new Error(\"The element #portal wasn't found\");\n  }\n\n  useEffect(() => {\n      const close = (e: { key: string; }) => {\n        if(e.key === \"Escape\"){\n          onClose();\n        }\n      }\n      window.addEventListener('keydown', close)\n    return () => window.removeEventListener('keydown', close)\n  },[onClose]);\n\n  return ReactDOM.createPortal((\n      <div className={modalStyles.popup} onClick={() => onClose()}>\n          <ModalOverlay />\n          <div className={modalStyles.modal} onClick={(evt) => {\n              evt.stopPropagation()}}>\n              <div className={modalStyles.cross} onClick={() => onClose()}>\n                  <CloseIcon type=\"primary\"/>\n              </div>\n              {children}\n          </div>\n      </div>\n    ),\n    modalRoot\n  )\n}\n\nexport default Modal;","import { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport orderDetailsStyles from './orderDetails.module.css';\n\nimport { useSelector } from '../../services/types/types';\n\n\nconst OrderDetails = () => {\n\n    const { orderNumber }  = useSelector(state => state.order);\n\n    return (\n        <div className={`pt-30 pb-30 ${orderDetailsStyles.orderDetails}`}>\n            <h2 className={`text text_type_digits-large mb-8 ${orderDetailsStyles.title}`}>{orderNumber}</h2>\n            <p className={`text text_type_main-medium mb-15 ${orderDetailsStyles.subtitle}`}>–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞</p>\n            <div className={`mb-15 ${orderDetailsStyles.icon}`}>\n                <CheckMarkIcon type={'secondary'} />\n            </div>\n            <p className={`text text_type_main-default mb-2`}>–í–∞—à –∑–∞–∫–∞–∑ –Ω–∞—á–∞–ª–∏ –≥–æ—Ç–æ–≤–∏—Ç—å</p>\n            <p className={`text text_type_main-default text_color_inactive`}>–î–æ–∂–¥–∏—Ç–µ—Å—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Ä–±–∏—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏</p>\n        </div>\n    )\n}\n\nexport default OrderDetails;\n","import BurgerIngredients from '../../components/burgerIngredients/burgerIngredients';\nimport BurgerConstructor from '../../components/burgerConstructor/burgerConstructor';\nimport Modal from '../../components/modal/modal';\nimport OrderDetails from '../../components/orderDetails/orderDetails';\n\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { useHistory, useLocation } from 'react-router-dom';\nimport React from 'react';\n\nimport { \n    OPEN_ORDER_DATA, \n    CLOSE_ORDER_DATA, \n    CLEAR_CONSTRUCTOR,\n    getOrderNumber\n} from '../../services/actions/order';\n\nimport { \n    OPEN_INGRIDIENT_DATA\n} from '../../services/actions/state';\n\nimport { useSelector, useDispatch } from '../../services/types/types';\n\nconst ConstructorPage = () => {\n\n    const { user }  = useSelector(state => state.user);\n    const { orderNumber }  = useSelector(state => state.order);\n    const location = useLocation();\n    const history = useHistory()\n\n    const { constructorIngridientsId }  = useSelector(state => state.order);\n    const dispatch = useDispatch();\n\n    const { modalOrderDetailsOpened }  = useSelector(state => state.order);\n    const { constructorIngridients }  = useSelector(state => state.order);\n\n\n    const buttonElement = React.useRef(null);\n\n    const handleOpenIndredientModal = (e: React.MouseEvent<HTMLLIElement>): void => {\n        dispatch({\n            type: OPEN_INGRIDIENT_DATA,\n            indridientId: e.currentTarget.id\n        });\n    }\n\n    const handleCloseOrderModal = () => {\n        dispatch({\n            type: CLOSE_ORDER_DATA\n        });\n\n        dispatch({\n            type: CLEAR_CONSTRUCTOR\n        });\n    }\n\n    const handleOpenOrderModal = (e: { preventDefault: () => void; }) => {\n        e.preventDefault();\n\n        if (user) {\n            if(constructorIngridients.length) {\n                const orderIngredientsIds = { \n                    \"ingredients\": constructorIngridientsId\n                };\n        \n                dispatch({\n                    type: OPEN_ORDER_DATA,\n                });\n        \n                dispatch(getOrderNumber(orderIngredientsIds));\n            }\n        } else {\n            history.push('/login', { from: location })\n        }\n    }\n\n    return (\n        <>\n            <DndProvider backend={HTML5Backend}>\n                <BurgerIngredients onClick={handleOpenIndredientModal}/>\n                \n                <BurgerConstructor ref={buttonElement} onClick={handleOpenOrderModal} />\n            </DndProvider>\n\n            {modalOrderDetailsOpened && orderNumber && \n            <Modal onClose={handleCloseOrderModal}>\n                <OrderDetails/>\n            </Modal> } \n        </>        \n    );\n}\n\nexport default ConstructorPage;","import ingredientDetails from './ingredientDetails.module.css';\n\nimport { TItem, useSelector } from '../../services/types/types';\nimport { useParams } from 'react-router-dom';\nimport { FC, useEffect, useState } from 'react';\n\nconst IngredientDetails: FC = () => {\n\n    const { ingridients } = useSelector(state => state.ingridients);\n    const [clickedIngridient, setClickedIngridient] = useState<TItem | undefined>();\n\n    const params: {id: string} = useParams();\n\n    useEffect(() => {\n        const sortedIngridient = ingridients.find((item) => item._id === params.id);\n\n        setClickedIngridient(sortedIngridient)\n    }, [ingridients, params.id])\n\n    return  <>\n        { \n            clickedIngridient && (\n            <div className={`pt-10 pb-15 ${ingredientDetails.ingredientDetails}`}>\n                <h2 className={`pl-10 text text_type_main-large ${ingredientDetails.title}`}>–î–µ—Ç–∞–ª–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞</h2>\n                <img className={`mb-4`} src={clickedIngridient.image_large} alt={clickedIngridient.name} />\n                <p className={`mb-8 text text_type_main-medium`}>{clickedIngridient.name}</p>\n                <ul className={`${ingredientDetails.infoItems}`}>\n                    <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                        <span className={`text text_type_main-default text_color_inactive mb-2`}>–ö–∞–ª–æ—Ä–∏–∏, –∫–∫–∞–ª</span>\n                        <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient.calories}</span>\n                    </li>\n                    <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                        <span className={`text text_type_main-default text_color_inactive mb-2`}>–ë–µ–ª–∫–∏, –≥</span>\n                        <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient.proteins}</span>\n                    </li>\n                    <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                        <span className={`text text_type_main-default text_color_inactive mb-2`}>–ñ–∏—Ä—ã, –≥</span>\n                        <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient.fat}</span>\n                    </li>\n                    <li className={`${ingredientDetails.infoItem}`}>\n                        <span className={`text text_type_main-default text_color_inactive mb-2`}>–£–≥–ª–µ–≤–æ–¥—ã, –≥</span>\n                        <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient.carbohydrates}</span>\n                    </li>\n                </ul>\n            </div>\n        )}\n\n    </>\n}\n\nexport default IngredientDetails;","import ingredientDetailsPage from './ingredientDetailsPage.module.css';\n\nimport IngredientDetails from '../../components/ingredientDetails/ingredientDetails';\n\nimport { FC } from 'react';\n\nconst IngredientDetailsPage: FC = () => {\n    return (\n        <div className={`pt-20 ${ingredientDetailsPage.ingredientDetailsPage}`}>\n            <IngredientDetails />\n        </div>\n    )\n}\n\nexport default IngredientDetailsPage;","import st from './orderIngredientIcon.module.css';\n\nimport { TItem } from '../../services/types/types';\nimport { FC } from 'react';\n\n\nconst OrderIngredientIcon: FC<{\n    item: TItem | undefined;\n    index: number;\n    withNumber: boolean;\n    mainCounter: number\n}> = ({item, index, withNumber, mainCounter}) => {\n\n\n    return ( \n    <>\n        {withNumber && index === 0 ?\n            <li className={`${st.ingredient}`}>\n                <div className={`${st.imgContainer}`}>\n                    <img className={`${st.img}`} src={item?.image} alt={item?.name} />\n                </div>\n\n                <span className={`text text_type_main-default ${st.mainCounter}`}>{`+${mainCounter}`}</span>\n            </li> \n            :\n            <li className={`${st.ingredient}`}>\n                <div className={`${st.imgContainer}`}>\n                    <img className={`${st.img}`} src={item?.image} alt={item?.name} />\n                </div>\n            </li> \n        }\n    </>\n        \n        \n    )\n}\n\nexport default OrderIngredientIcon;","export const getOrderTimeCreation = (dateString: string): string => {\n    const orderDateTime = new Date(dateString);\n    \n    const orderDate = new Date(dateString);\n    const orderDateMidnight = orderDate.setHours(0, 0, 0, 0);\n    const nowDate = new Date();\n    const nowDateMidnight = nowDate.setHours(0, 0, 0, 0);\n  \n    const dayMs = 86400000 // = 1000–º—Å * 60—Å–µ–∫ * 60–º–∏–Ω * 24—á\n  \n    const differenceInDays = (orderDateMidnight - nowDateMidnight) / dayMs;\n    let actualCompletionTime;\n    if (differenceInDays < -3) {\n      actualCompletionTime = orderDate.toLocaleDateString('ru-RU');\n    } else {\n      actualCompletionTime = new Intl.RelativeTimeFormat('ru', {numeric: \"auto\"})\n        .format(differenceInDays, 'day');\n    }\n    const actualDateInformationStr = `${actualCompletionTime}, ${orderDateTime.getHours() >= 10\n      ? orderDateTime.getHours()\n      : \"0\" + orderDateTime.getHours()}:${orderDateTime.getMinutes() >= 10\n      ? orderDateTime.getMinutes()\n      : \"0\" + orderDateTime.getMinutes()} i-GMT${orderDateTime.getTimezoneOffset() <= 0\n      ? \"+\" + orderDateTime.getTimezoneOffset() / -60\n      : \"-\" + orderDateTime.getTimezoneOffset() / -60}`;\n    return actualDateInformationStr.charAt(0).toUpperCase() + actualDateInformationStr.slice(1);\n  }","import st from './order.module.css';\n\nimport { Link, useLocation } from 'react-router-dom';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TItem, useSelector } from '../../services/types/types';\nimport OrderIngredientIcon from '../orderIngredientIcon/orderIngredientIcon';\nimport { useEffect, useState } from 'react';\nimport { getOrderTimeCreation } from '../../utils/order';\n\nconst Order = ({order, userOrder}: any) => {\n\n    const id = order._id;\n    const location = useLocation();\n\n    const { ingridients } = useSelector(state => state.ingridients);\n\n    const [total, setTotal] = useState(0); \n    const [iconIngredientsArray, setIconIngredientsArray] = useState<Array<TItem | undefined>>(); \n    const [mainCounter, setMainCounter] = useState(0); \n    const [feedIngredients, setFeedIngredients] = useState<Array<TItem | undefined>>([]); \n    const [dateOfCreate, setDateOfCreate] = useState('');\n    const [orderStatus, setClickedStatus] = useState('');\n\n    useEffect(() => {\n        let feedIngredients: Array<TItem | undefined>  = [];\n\n        order.ingredients.forEach((item: string, index: any) => {\n            if(ingridients) {\n                feedIngredients[index]  =  ingridients.find(i => i._id === item)\n            }\n        })\n\n        const orderStatus = order.status === \"done\" ? \"–í—ã–ø–æ–ª–Ω–µ–Ω\" : \"–ì–æ—Ç–æ–≤–∏—Ç—Å—è\"\n        setClickedStatus(orderStatus)\n\n        let total = 0;\n\n        feedIngredients.map((item) => {\n            if(item) {\n                return total += item.price\n            }\n        });\n\n        setTotal(total);\n\n        feedIngredients.reverse();\n\n        let feedIngredientsCutDublicate = feedIngredients;\n\n        setFeedIngredients(feedIngredients)\n\n        const iconIngredientsArray = feedIngredients.length >=6 ? feedIngredients.slice(0, 6) : feedIngredientsCutDublicate;\n\n        setIconIngredientsArray(iconIngredientsArray)\n\n        const mainCounter = feedIngredients.length - 6;\n\n        setMainCounter(mainCounter);\n\n        setDateOfCreate(getOrderTimeCreation(order.createdAt));\n\n    }, [ingridients, order.createdAt, order.ingredients, order.status])\n\n    const status = orderStatus === \"–í—ã–ø–æ–ª–Ω–µ–Ω\" ? st.statusDone : st.statusPedding\n\n    const nameStyle = userOrder ? \"mb-3\" : \"mb-6\"\n\n    return (\n        <li className={`p-6 ${st.order}`}>\n            <Link \n            to={{\n                pathname: `${location.pathname}/${id}`,\n                state: {background: location}\n            }}\n            className={`${st.order_link}`}>\n                <div className={`mb-6 ${st.order__meta}`}>\n                    <span className={`text text_type_digits-default ${st.order__number}`}>\n                        {`#${order.number}`}\n                    </span>\n                    <span className={`text text_type_main-default text_color_inactive ${st.order__date}`}>\n                        {dateOfCreate}\n                    </span>\n                </div>\n\n                <span className={`${nameStyle} text text_type_main-medium ${st.order__title}`}>\n                    { order.name }\n                </span>\n\n                {userOrder ? \n                <span className={`mb-6 text text_type_main-default ${status}`}>\n                    { orderStatus }\n                </span>\n                : null\n                }\n\n                <div className={`${st.order__info}`}>\n                    <ul className={`${st.order__ingredients}`}>\n                        {iconIngredientsArray && iconIngredientsArray.map((item, index) => (\n                            item && feedIngredients.length >= 6 ?\n                            < OrderIngredientIcon \n                            item={item}\n                            index={index}\n                            withNumber={true}\n                            mainCounter={mainCounter}\n                            key={index}\n                            />\n                            :\n                            < OrderIngredientIcon \n                            item={item}\n                            index={index}\n                            withNumber={false}\n                            mainCounter={mainCounter}\n                            key={index}\n                            />\n                        ))}\n                    </ul>\n\n                    <div className={`${st.order__cost}`}>\n                        <span className={`text text_type_digits-default mr-2 ${st.order__costNumber}`}>\n                            {total}\n                        </span>\n\n                        <div className={`${st.order__icon}`}>\n                            <CurrencyIcon type=\"primary\" />\n                        </div>\n                    </div>\n                </div>\n            </Link>\n        </li>\n       \n    );\n}\n\nexport default Order;","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\nexport const WS_GET_ALL_ORDERS: 'WS_GET_ALL_ORDERS' = 'WS_GET_ALL_ORDERS';\n\nexport const WS_USER_CONNECTION_START: 'WS_USER_CONNECTION_START' = 'WS_USER_CONNECTION_START';\nexport const WS_USER_CONNECTION_SUCCESS: 'WS_USER_CONNECTION_SUCCESS' = 'WS_USER_CONNECTION_SUCCESS';\nexport const WS_USER_CONNECTION_ERROR: 'WS_USER_CONNECTION_ERROR' = 'WS_USER_CONNECTION_ERROR';\nexport const WS_USER_CONNECTION_CLOSED: 'WS_USER_CONNECTION_CLOSED' = 'WS_USER_CONNECTION_CLOSED';\nexport const WS_GET_USER_ORDERS: 'WS_GET_USER_ORDERS' = 'WS_GET_USER_ORDERS';\n\nexport const wsConnectionSuccess = () => {\n    return {\n      type: WS_CONNECTION_SUCCESS\n    };\n  };\n  \n  export const wsConnectionError = () => {\n    return {\n      type: WS_CONNECTION_ERROR\n    };\n  };\n  \n  export const wsConnectionClosed = () => {\n    return {\n      type: WS_CONNECTION_CLOSED\n    };\n  };\n  \n  export const wsGetUsersOrders = (message: any) => {\n    return {\n      type: WS_GET_USER_ORDERS,\n      payload: message\n    };\n  };\n  \n  export const wsGetAllOrders = (message: any) => {\n    return {\n      type: WS_GET_ALL_ORDERS,\n      payload: message\n    };\n  };\n\n","import { useEffect }  from 'react';\n\nimport { useDispatch, useSelector } from '../../services/types/types';\n\nimport st from './feed.module.css';\n\nimport Order from '../../components/order/order';\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSE } from '../../services/actions/ws';\n\nconst FeedPage = () => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch({ type: WS_CONNECTION_START });\n\n        return () => {\n            dispatch({ type: WS_CONNECTION_CLOSE });\n        }\n\n    }, [dispatch])\n\n    const { orders, totalToday, total }  = useSelector(state => state.ws);\n\n    return (\n        <div className={`ml-5 ${st.feed}`}>\n            <h1 className={`mt-10 mb-5 text text_type_main-large`}>–õ–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–æ–≤</h1>\n            <div className={`${st.feed__container}`}>\n                <ul className={`mr-15 ${st.feed__orders}`}>\n                    {orders.map((item) => (\n                        <Order \n                        order={item}\n                        key={ item._id }\n                        userOrder={false}\n                    />\n                    ))}\n                </ul>\n\n                <div className={`${st.feed__info}`}>\n                    <div className={`mb-15 ${st.feed__status}`}>\n                        <div className={`mr-9 ${st.feed__statusContainer}`}>\n                            <span className={`text text_type_main-medium mb-6 ${st.feed__statusTitle}`}>\n                                –ì–æ—Ç–æ–≤—ã:\n                            </span>\n                            <ul className={`${st.feed__statusList}`}>\n                                {orders.filter((item) => item.status === 'done').slice(0, 10).map((item) => (\n                                    <li className={`text text_type_digits-default ${st.feed__statusItem} ${st.feed__statusItemDone}`} key={item._id}>\n                                        {item.number}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n\n                        <div className={`${st.feed__statusContainer}`}>\n                            <span className={`text text_type_main-medium mb-6 ${st.feed__statusTitle}`}>\n                                –í —Ä–∞–±–æ—Ç–µ:\n                            </span>\n                            <ul className={`${st.feed__statusList}`}>\n                                {orders.filter((item) => item.status === 'pending').slice(0, 10).map((item) => (\n                                    <li className={`text text_type_digits-default ${st.feed__statusItem}`} key={item._id}>\n                                        {item.number}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    </div>\n\n                    <div className={`mb-15 ${st.feed__statistics}`}>\n                        <span className={`text text_type_main-medium ${st.feed__statisticsTitle}`}>\n                            –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è:\n                        </span>\n\n                        <span className={`text text_type_digits-large ${st.feed__statisticsInfo}`}>\n                            {total}\n                        </span>\n                    </div>\n\n                    <div className={`${st.feed__statistics}`}>\n                        <span className={`text text_type_main-medium ${st.feed__statisticsTitle}`}>\n                            –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:\n                        </span>\n\n                        <span className={`text text_type_digits-large ${st.feed__statisticsInfo}`}>\n                            {totalToday}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default FeedPage;","import AsideMenu from '../../components/asideMenu/asideMenu';\nimport Order from '../../components/order/order';\nimport st from './userOrdersPage.module.css';\n\nimport { useDispatch, useSelector } from '../../services/types/types';\nimport { useEffect } from 'react';\nimport { WS_CONNECTION_CLOSE, WS_USER_CONNECTION_START } from '../../services/actions/ws';\n\nconst UserOrdersPage = () => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch({ type: WS_USER_CONNECTION_START });\n\n        return () => {\n            dispatch({ type: WS_CONNECTION_CLOSE });\n        }\n\n    }, [dispatch])\n\n    const { orders }  = useSelector(state => state.ws);\n\n    return (\n        <div className={`${st.container}`}>\n            <div className={`mt-30 ${st.menuContainer}`}>\n                <AsideMenu />\n                <span className={`text text_type_main-default text_color_inactive mt-20 pl-5 ${st.menuInfo}`}>\n                    –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤\n                </span>\n            </div>\n\n            <ul className={`mt-10 ${st.orders}`}>\n                {orders.map((item) => (\n                    <Order \n                        order={item}\n                        key={ item._id }\n                        userOrder={true}\n                    />\n                ))}\n            </ul>\n        </div>\n    )\n}\n\nexport default UserOrdersPage;","import { FC }  from 'react';\n\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\n\nimport { useSelector } from '../services/types/types';\n\nexport const ProtectedRoute: FC<RouteProps> = ({ children, ...rest }) => {\n\n  const { user }  = useSelector(state => state.user);\n\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}","import st from './orderIngredientsDetails.module.css';\n\nimport { TCount, TItem, TOrder, useDispatch, useSelector } from '../../services/types/types';\nimport { useParams } from 'react-router-dom';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { getOrderTimeCreation } from '../../utils/order';\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/actions/ws';\n\nconst OrderIngredientsDetails: FC = () => {\n\n    const { orders } = useSelector(state => state.ws);\n    const { ingridients } = useSelector(state => state.ingridients);\n\n    const dispatch = useDispatch();\n\n    const [clickedOrder, setClickedOrder] = useState<TOrder>();\n    const [orderStatus, setClickedStatus] = useState('');\n    const [dateOfCreate, setDateOfCreate] = useState('');\n    const [total, setTotal] = useState(0);\n    const [count, setCount] = useState();\n    const [orderIngredients, setOrderIngredients] = useState<Array<TItem | undefined>>();\n\n    // useEffect(() => {\n        \n    // }, [dispatch, orders]);\n\n    // console.log(orders)\n\n    const params: {id: string} = useParams();\n\n    const countNotUniqueIngredients = useCallback(\n        (array: any) => {\n                 return array.reduce(function (counter: TCount, idValue: string) {\n                   counter[idValue] ? counter[idValue]++ : counter[idValue] = 1;\n                   return counter;\n                 }, {});\n             \n             },\n         []\n       );\n\n    useEffect(() => {\n        if (orders.length === 0) {\n            console.log(orders.length)\n            dispatch({ type: WS_CONNECTION_START });\n            \n            return () => {\n                dispatch({ type: WS_CONNECTION_CLOSE });\n            }\n        }\n\n        const sortedOrder= orders.find((item) => item._id === params.id);\n        setClickedOrder(sortedOrder)\n\n        if(clickedOrder) {\n            const orderStatus = clickedOrder.status === \"done\" ? \"–í—ã–ø–æ–ª–Ω–µ–Ω\" : \"–ì–æ—Ç–æ–≤–∏—Ç—Å—è\"\n            setClickedStatus(orderStatus)\n\n            setDateOfCreate(getOrderTimeCreation(clickedOrder.createdAt));\n\n            let orderIngredients: Array<TItem | undefined>  = [];\n\n            clickedOrder.ingredients.forEach((item: string, index: any) => {\n                if(ingridients) {\n                    orderIngredients[index]  =  ingridients.find(i => i._id === item)\n                }\n            })\n\n            setOrderIngredients(orderIngredients)\n\n            let total = 0;\n\n            orderIngredients.map((item) => {\n                if(item) {\n                    return total += item.price\n                }\n            });\n    \n            setTotal(total);\n\n            setCount(countNotUniqueIngredients(clickedOrder.ingredients));\n        }\n    }, [clickedOrder, orders, params.id, orderStatus, ingridients, countNotUniqueIngredients, dispatch])\n\n\n    const uniqIngredients = orderIngredients?.filter((ingredient, index, array) => {\n        return array.indexOf(ingredient) === index\n    });\n\n    const status = orderStatus === \"–í—ã–ø–æ–ª–Ω–µ–Ω\" ? st.statusDone : st.statusPedding\n    \n\n    return  <>\n        { clickedOrder && \n           <div className={`p-10 ${st.container}`}>\n                <span className={`mb-5 text text_type_digits-default ${st.number}`}>\n                   {`#${clickedOrder.number}`}\n                </span>\n\n                <h3 className={`mb-2 text text_type_main-medium ${st.title}`}>\n                    {`${clickedOrder.name}`}\n                </h3>\n\n                <span className={`mb-15 text text_type_main-default ${status}`}>\n                    {orderStatus}\n                </span>\n\n                <span className={`mb-6 text text_type_main-medium ${st.subtitle}`}>\n                    –°–æ—Å—Ç–∞–≤:\n                </span>\n\n                <ul className={`${st.orders}`}>\n                {uniqIngredients && uniqIngredients.map((item, index) => ( item && count &&\n                    <li key={index} className={`${st.order}`}>\n                        <div className={`${st.imgContainer}`}>\n                            <img className={`${st.img}`} src={`${item.image}`} alt=\"#\" />\n                        </div>\n\n                        <span className={`mr-4 text text_type_main-default ${st.ingredientName}`}>\n                            {item.name}\n                        </span>\n\n                        <div className={`${st.priceWrapper}`}>\n                            <span className={`mr-1 text text_type_digits-default ${st.count}`}>{ count[item._id] }</span>\n                            <span className={`mr-1 text text_type_main-default ${st.multiplier}`}>—Ö</span>\n                            <span className={`mr-2 text text_type_digits-default ${st.price}`}>\n                                {item.price}\n                            </span>\n\n                            <div className={`mr-6 ${st.icon}`}>\n                                <CurrencyIcon type=\"primary\" />\n                            </div>\n                        </div>\n                    </li>\n                ))}\n                </ul>\n\n                <div className={`${st.footer}`}>\n                    <span className={`text text_type_main-default text_color_inactive ${st.date}`}>\n                        { dateOfCreate }\n                    </span>\n\n                    <div className={`${st.total–°ost}`}>\n                        <span className={`mr-2 text text_type_digits-default ${st.sum}`}>\n                            {total}\n                        </span>\n                        \n                        <div className={`${st.icon}`}>\n                            <CurrencyIcon type=\"primary\" />\n                        </div>\n                    </div>\n                </div>\n           </div>\n       \n        }\n    </>\n}\n\nexport default OrderIngredientsDetails;","import st from './orderIngredientsDetailsPage.module.css';\nimport { FC } from 'react';\nimport OrderIngredientsDetails from '../../components/orderIngredientsDetails/orderIngredientsDetails';\n\nconst orderIngredientsDetailsPage: FC = () => {\n\n    return  (\n        <div className={`pt-20 ${st.container}`}>\n            <OrderIngredientsDetails />\n        </div>\n    )\n}\n\nexport default orderIngredientsDetailsPage;","import { useEffect }  from 'react';\n\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\n\nimport appStyles from './app.module.css';\n\nimport AppHeader from '../appHeader/appHeader';\n\nimport { ConstructorPage, LoginPage, RegistarationPage, ForgotPage, ResetPasswordPage, ProfilePage, IngredientDetailsPage, FeedPage, UserOrdersPage } from '../../pages/'\n\nimport { getAllIngridients } from '../../services/actions/state';\nimport { getCookie, getUserInfo } from '../../services/actions/user';\n\nimport { useDispatch } from '../../services/types/types';\nimport { ProtectedRoute } from '../protected-route';\nimport IngredientDetails from '../ingredientDetails/ingredientDetails';\nimport Modal from '../modal/modal';\nimport OrderIngredientsDetails from '../orderIngredientsDetails/orderIngredientsDetails';\nimport OrderIngredientsDetailsPage from '../../pages/orderIngredientsDetailsPage/orderIngredientsDetailsPage';\n\n\n\n\nconst App = () => {\n\n    const history: any = useHistory();\n    const location: any = useLocation();\n\n    let background = history.action === 'PUSH' && location.state && location.state.background;\n\n    const dispatch = useDispatch();\n\n    const token = getCookie('token');\n    const accessToken = 'Bearer ' + getCookie('token');\n    const refreshToken = getCookie('refreshToken');\n\n    useEffect(() => {\n        dispatch(getAllIngridients());\n\n        if(token) {\n            dispatch(getUserInfo(accessToken, refreshToken));\n        }\n\n    }, [dispatch, token, accessToken, refreshToken, history]) \n\n    return (\n        <div className={appStyles.app}>\n            <AppHeader />\n            <div className={appStyles.app__container}>\n                <Switch location={background || location}>\n                    <ProtectedRoute path=\"/profile/order\" exact={true}>\n                        <UserOrdersPage />\n                    </ProtectedRoute>\n\n                    <ProtectedRoute path=\"/profile/order/:id\" exact={true}>\n                        <OrderIngredientsDetailsPage />\n                    </ProtectedRoute>\n\n                    <ProtectedRoute path=\"/profile\" exact={true}>\n                        <ProfilePage />\n                    </ProtectedRoute>\n\n                    <Route path=\"/login\" exact={true}>\n                        <LoginPage />\n                    </Route>\n\n                    <Route path=\"/register\" exact={true}>\n                        <RegistarationPage />\n                    </Route>\n\n                    <Route path=\"/forgot-password\" exact={true}>\n                        <ForgotPage />\n                    </Route>\n\n                    <Route path=\"/reset-password\" exact={true}>\n                        <ResetPasswordPage />\n                    </Route>\n\n                    <Route path=\"/ingredients/:id\" exact={true}>\n                        <IngredientDetailsPage />\n                    </Route>\n\n                    <Route path=\"/\" exact={true}>\n                        <ConstructorPage />\n                    </Route>\n\n                    <Route path=\"/feed\" exact={true}>\n                        <FeedPage />\n                    </Route>\n\n                    <Route path=\"/feed/:id\" exact={true}>\n                        <OrderIngredientsDetailsPage />\n                    </Route>\n                </Switch>\n\n                {\n                    background &&\n                    <Route path=\"/ingredients/:id\" exact={true}>\n                        <Modal onClose={() => {\n                            history.goBack();\n                        }}>\n                            <IngredientDetails/>\n                        </Modal> \n                    </Route>\n                }\n\n                {\n                    background &&\n                    <Route path=\"/feed/:id\" exact={true}>\n                        <Modal onClose={() => {\n                            history.goBack();\n                        }}>\n                            <OrderIngredientsDetails/>\n                        </Modal> \n                    </Route>\n                }\n\n                {\n                    background &&\n                    <Route path=\"/profile/order/:id\" exact={true}>\n                        <Modal onClose={() => {\n                            history.goBack();\n                        }}>\n                            <OrderIngredientsDetails/>\n                        </Modal> \n                    </Route>\n                }\n            </div>\n        </div>\n    )\n}\n  \nexport default App;","import {\n    GET_INGRIDIENTS_IDS,\n    GET_BUN_CONSTRUCTOR,\n    GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n    GET_INGRIDIENTS_CONSTRUCTOR,\n    DELETE_INGRIDIENT,\n    GET_TOTAL_PRICE,\n    CONSTRUCTOR_INGREDIENTS_SORT,\n    CLEAR_CONSTRUCTOR,\n    OPEN_ORDER_DATA,\n    CLOSE_ORDER_DATA,\n  \n    GET_ORDER_NUMBER_SUCCESS,\n    GET_ORDER_NUMBER_FAILED,\n} from '../actions/order';\nimport { TItem, TOrderInitialState } from '../types/types';\n\ninterface IOpenOrderDataAction {\n    readonly type: typeof OPEN_ORDER_DATA;\n    readonly modalOrderDetailsOpened: boolean;\n  }\n  \n  interface ICloseOrderDataAction {\n    readonly type: typeof CLOSE_ORDER_DATA;\n    readonly modalOrderDetailsOpened: boolean;\n  }\n  \n  interface IGetTotalPriceAction {\n    readonly type: typeof GET_TOTAL_PRICE;\n    readonly totalPrice: number;\n  }\n  \n  interface IGetOrderNumberSuccessAction {\n    readonly type: typeof GET_ORDER_NUMBER_SUCCESS;\n    readonly orderNumber: string;\n  }\n  \n  interface IGetOrderNumberFailedAction {\n    readonly type: typeof GET_ORDER_NUMBER_FAILED;\n  }\n  \n  interface IGetIngridientsIdsAction {\n    readonly type: typeof GET_INGRIDIENTS_IDS;\n    readonly constructorIngridientsId: Array<string>;\n    readonly constructorIngridientId: Array<string>;\n  }\n  \n  interface IGetBunConstructorAction {\n    readonly type: typeof GET_BUN_CONSTRUCTOR;\n    readonly buns: TItem[];\n    readonly bun: TItem;\n  }\n  \n  interface IGetIngridientsConstructorAction {\n    readonly type: typeof GET_INGRIDIENTS_CONSTRUCTOR;\n    readonly constructorIngridients: TItem[];\n  }\n  \n  interface IConstructorIngridientsSortAction {\n    readonly type: typeof CONSTRUCTOR_INGREDIENTS_SORT;\n    readonly otherIngridients: TItem[];\n    readonly hoverIndex: number;\n    readonly dragIndex: number;\n  }\n  \n  interface IGetOtherIngridientsConstructorAction {\n    readonly type: typeof GET_OTHER_INGRIDIENTS_CONSTRUCTOR;\n    readonly otherIngridients: TItem[];\n    readonly otherIngridient: TItem;\n  }\n  \n  interface IDeleteIngridientAction {\n    readonly type: typeof DELETE_INGRIDIENT;\n    readonly constructorIngridients: TItem[];\n    readonly otherIngridients: TItem[];\n    readonly secondId: string;\n  }\n  \n  interface IClearConstructorAction {\n    readonly type: typeof CLEAR_CONSTRUCTOR;\n    readonly constructorIngridients: TItem[];\n    readonly otherIngridients: TItem[];\n    readonly buns: TItem[];\n    readonly orderNumber: string\n  }\n\n  export type TOrderActions = \n  | IOpenOrderDataAction\n  | ICloseOrderDataAction\n  | IGetTotalPriceAction\n  | IGetOrderNumberSuccessAction\n  | IGetOrderNumberFailedAction\n  | IGetIngridientsIdsAction\n  | IGetIngridientsConstructorAction\n  | IConstructorIngridientsSortAction\n  | IGetOtherIngridientsConstructorAction\n  | IDeleteIngridientAction\n  | IClearConstructorAction\n  | IGetBunConstructorAction;\n\n\n  const initialState: TOrderInitialState = {  \n    constructorIngridientsId: [],\n    constructorIngridients: [],\n    buns: [],\n    otherIngridients: [],\n\n    totalPrice: 0,\n\n    modalOrderDetailsOpened: false,\n\n    orderNumber: '',\n  };\n\n  export const orderReducer = (state = initialState, action: TOrderActions): TOrderInitialState => {\n    switch (action.type) {\n      case OPEN_ORDER_DATA: {\n        return { \n          ...state, \n          modalOrderDetailsOpened: true,\n        };\n      }\n      case CLOSE_ORDER_DATA: {\n        return { \n          ...state, \n          modalOrderDetailsOpened: false,\n        };\n      }\n  \n      case GET_TOTAL_PRICE: {\n        return { \n          ...state, \n          totalPrice: action.totalPrice,\n        };\n      }\n  \n      case GET_ORDER_NUMBER_SUCCESS: {\n        return {\n          ...state,\n          orderNumber: action.orderNumber\n        };\n      }\n  \n      case GET_ORDER_NUMBER_FAILED: {\n        return {\n          ...state\n        };\n      }\n  \n      case GET_INGRIDIENTS_IDS: {\n        return {\n          ...state,\n          constructorIngridientsId: action.constructorIngridientId\n        };\n      }\n  \n      case GET_INGRIDIENTS_CONSTRUCTOR: {\n        return {\n          ...state,\n          constructorIngridients: state.buns.concat(state.otherIngridients),\n        };\n      }\n  \n      case GET_BUN_CONSTRUCTOR: {\n        return {\n          ...state,\n          buns: [action.bun]\n        };\n      }\n  \n      case CONSTRUCTOR_INGREDIENTS_SORT: {\n        let sortIngridients = [...state.otherIngridients];\n        let otherIngredientsSort = sortIngridients.splice(action.dragIndex, 1);\n        sortIngridients.splice(action.hoverIndex, 0, ...otherIngredientsSort);\n  \n        return {\n          ...state, \n          otherIngridients: sortIngridients\n        }\n      }\n  \n      case GET_OTHER_INGRIDIENTS_CONSTRUCTOR: {\n        return {\n          ...state,\n          otherIngridients: [...state.otherIngridients, action.otherIngridient]\n        };\n      }\n  \n      case DELETE_INGRIDIENT: {\n        return {\n          ...state,\n          constructorIngridients: [...state.constructorIngridients].filter((item) => item.secondId !== action.secondId),\n          otherIngridients: [...state.otherIngridients].filter((item) => item.secondId !== action.secondId),\n        };\n      }\n  \n      case CLEAR_CONSTRUCTOR: {\n        return {\n          ...state,\n          constructorIngridients: [],\n          buns: [],\n          otherIngridients: [],\n          orderNumber: ''\n        };\n      }\n  \n      default: {\n          return state\n      }\n    }\n  } ","import {\n  GET_ALL_INGRIDIENTS_REQUEST,\n  GET_ALL_INGRIDIENTS_SUCCESS,\n  GET_ALL_INGRIDIENTS_FAILED,\n\n  OPEN_INGRIDIENT_DATA,\n  CLOSE_INGRIDIENT_DATA,\n\n} from '../actions/state';\n\nimport { TItem, TIngredientsInitialState } from '../types/types';\n\ninterface IGetAllIngridientsAction  {\n  readonly type: typeof GET_ALL_INGRIDIENTS_REQUEST;\n  readonly ingridientsRequest: boolean;\n  readonly ingridientsFailed: boolean;\n}\n\ninterface IGetAllIngridientsSuccessAction  {\n  readonly type: typeof GET_ALL_INGRIDIENTS_SUCCESS;\n  readonly ingridients: TItem[];\n  readonly ingridientsRequest: boolean;\n  readonly ingridientsFailed: boolean;\n}\n\ninterface IGetAllIngridientsFailedAction {\n  readonly type: typeof GET_ALL_INGRIDIENTS_FAILED;\n  readonly ingridientsRequest: boolean;\n  readonly ingridientsFailed: boolean;\n}\n\ninterface IOpenIngridientDataAction {\n  readonly type: typeof OPEN_INGRIDIENT_DATA;\n  readonly modalIngredientDetailsOpened: boolean;\n  readonly indridientId: string;\n}\n\ninterface ICloseIngridientDataAction {\n  readonly type: typeof CLOSE_INGRIDIENT_DATA;\n  readonly modalIngredientDetailsOpened: boolean;\n  readonly indridientId: string;\n}\n\nexport type TIngredientActions = \n  | IGetAllIngridientsAction\n  | IGetAllIngridientsSuccessAction\n  | IGetAllIngridientsFailedAction\n  | IOpenIngridientDataAction\n  | ICloseIngridientDataAction;\n\nconst initialState: TIngredientsInitialState = {\n    ingridients: [],\n    ingridientsRequest: false,\n    ingridientsFailed: false,\n    modalIngredientDetailsOpened: false,\n    indridientId: '',\n  };\n\nexport const ingridientsReducer = (state = initialState, action: TIngredientActions): TIngredientsInitialState => {\n  switch (action.type) {\n    case GET_ALL_INGRIDIENTS_REQUEST:{\n      return {\n        ...state,\n        ingridientsRequest: true,\n        ingridientsFailed: false,\n      };\n    }\n    case GET_ALL_INGRIDIENTS_SUCCESS: {\n      return { \n        ...state, \n        ingridients: action.ingridients, \n        ingridientsRequest: false,\n        ingridientsFailed: false,\n      };\n    }\n    case GET_ALL_INGRIDIENTS_FAILED: {\n      return { \n        ...state, \n        ingridientsFailed: true, \n        ingridientsRequest: false \n      };\n    }\n\n    case OPEN_INGRIDIENT_DATA: {\n      return { \n        ...state, \n        modalIngredientDetailsOpened: true,\n        indridientId: action.indridientId\n      };\n    }\n    case CLOSE_INGRIDIENT_DATA: {\n      return { \n        ...state, \n        modalIngredientDetailsOpened: false,\n        indridientId: ''\n      };\n    }\n\n    default: {\n        return state\n    }\n  }\n} \n","import {  \n    GET_USER,\n    CLEAN_USER\n  } from '../actions/user';\n  \nimport { TUserInitialState } from '../types/types';\n\nexport interface IUserRegistrationAction {\n    readonly type: typeof GET_USER;\n    readonly name: string;\n    readonly email: string;\n}\n\nexport interface IUserLogOutAction {\n    readonly type: typeof CLEAN_USER;\n    readonly user: null;\n}\n\nconst initialState: TUserInitialState = {\n    user: null\n  };\n\nexport type TUserActions = \n    | IUserRegistrationAction\n    | IUserLogOutAction;\n\nexport const userReducer = (state = initialState, action: TUserActions): TUserInitialState => {\n    switch (action.type) {\n      case GET_USER: {\n        return {\n          ...state,\n          user: {\n            name: action.name,\n            email: action.email\n          }\n        };\n      }\n  \n      case CLEAN_USER: {\n        return {\n          ...state,\n          user: action.user,\n        };\n      }\n  \n      default: {\n          return state\n      }\n    }\n  } ","import {\n    WS_CONNECTION_SUCCESS,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_CLOSED,\n    WS_GET_ALL_ORDERS,\n    WS_USER_CONNECTION_SUCCESS,\n    WS_USER_CONNECTION_ERROR,\n    WS_USER_CONNECTION_CLOSED,\n    WS_GET_USER_ORDERS,\n    WS_CONNECTION_START,\n    WS_USER_CONNECTION_START,\n    WS_CONNECTION_CLOSE\n  } from '../actions/ws';\nimport { TFeedState, TOrder } from '../types/types';\n\nexport interface IWsSuccessAction {\n  readonly type: typeof WS_CONNECTION_SUCCESS;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsErrorAction {\n  readonly type: typeof WS_CONNECTION_ERROR;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsClosedAction {\n  readonly type: typeof WS_CONNECTION_CLOSED;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsGetAction {\n  readonly payload: any;\n  readonly type: typeof WS_GET_ALL_ORDERS;\n  orders: ReadonlyArray<TOrder>,\n  readonly total: number;\n  readonly totalToday: number;\n}\n\nexport interface IWsUserSuccessAction {\n  readonly type: typeof WS_USER_CONNECTION_SUCCESS;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsUserErrorAction {\n  readonly type: typeof WS_USER_CONNECTION_ERROR;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsUserClosedAction {\n  readonly type: typeof WS_USER_CONNECTION_CLOSED;\n  readonly wsConnected: boolean;\n}\n\nexport interface IWsUserGetAction {\n  readonly type: typeof WS_GET_USER_ORDERS;\n  orders: ReadonlyArray<TOrder>,\n  readonly total: number;\n  readonly totalToday: number;\n  readonly payload: any\n}\n\nexport interface IWsUserConnectionAction {\n  readonly type: typeof WS_USER_CONNECTION_START;\n}\n\nexport interface IWsConnectionAction {\n  readonly type: typeof WS_CONNECTION_START;\n}\n\nexport interface IWsCloseAction {\n  readonly type: typeof WS_CONNECTION_CLOSE;\n}\n\nexport type TWsActions = \n  | IWsSuccessAction\n  | IWsErrorAction\n  | IWsClosedAction\n  | IWsGetAction\n  | IWsUserSuccessAction\n  | IWsUserErrorAction\n  | IWsUserClosedAction\n  | IWsUserGetAction\n  | IWsUserConnectionAction\n  | IWsConnectionAction\n  | IWsCloseAction;\n\n  const initialState: TFeedState = {\n    wsConnected: false,\n    orders: [],\n    total: 0,\n    totalToday: 0,\n  };\n  \n  export const wsReducer = (state = initialState, action: TWsActions): TFeedState => {\n    switch (action.type) {\n      case WS_USER_CONNECTION_START:\n        return {\n          ...state\n        };\n\n      case WS_CONNECTION_START:\n        return {\n          ...state\n        };\n\n      case WS_CONNECTION_CLOSE:\n        return {\n          ...state\n        };\n\n      case WS_CONNECTION_SUCCESS:\n        return {\n          ...state,\n          wsConnected: true\n        };\n  \n      case WS_CONNECTION_ERROR:\n        return {\n          ...state,\n          wsConnected: false\n        };\n  \n      case WS_CONNECTION_CLOSED:\n        return {\n          ...state,\n          wsConnected: false\n        };\n  \n      case WS_GET_ALL_ORDERS:\n        return {\n          ...state,\n          orders: [action.payload.orders][0],\n          total: action.payload.total,\n          totalToday: action.payload.totalToday,\n        };\n\n        case WS_USER_CONNECTION_SUCCESS:\n        return {\n          ...state,\n          wsConnected: true\n        };\n  \n      case WS_USER_CONNECTION_ERROR:\n        return {\n          ...state,\n          wsConnected: false\n        };\n  \n      case WS_USER_CONNECTION_CLOSED:\n        return {\n          ...state,\n          wsConnected: false\n        };\n  \n      case WS_GET_USER_ORDERS:\n        return {\n          ...state,\n          orders: [action.payload.orders][0],\n          total: action.payload.total,\n          totalToday: action.payload.totalToday,\n        };\n\n      default:\n        return state;\n    }\n  };","import { combineReducers } from 'redux';\nimport { orderReducer } from './order';\nimport { ingridientsReducer } from './state';\nimport { userReducer } from './user';\nimport { wsReducer } from './ws';\n\nexport const rootReducer = combineReducers({\n    ingridients: ingridientsReducer,\n    user: userReducer,\n    order: orderReducer,\n    ws: wsReducer,\n}) ","import { getCookie } from '../actions/user';\nimport { TWsActions } from '../reducers/ws';\nimport { TWsActionsAll } from '../types/types';\nimport { Middleware } from \"redux\";\nimport { RootState } from '../actions/state';\n\nexport const socketMiddleware = (wsUrl: string | URL, wsActions: TWsActionsAll, token: boolean ) : Middleware<{}, RootState> => {\n    return (store) => {\n        let socket: WebSocket | null = null;\n\n    return (next) => (action: TWsActions) => {\n      const { dispatch } = store;\n      const { type } = action;\n      const accessToken = getCookie('token');\n\n      const { wsInit, wsClose, onOpen, onClose, onError, onMessage } = wsActions;\n \n      if (type === wsInit) {\n        socket = token ? new WebSocket(`${wsUrl}?token=${accessToken}`) : new WebSocket(`${wsUrl}/all`);\n      }\n\n      if (socket) {\n\n        socket.onopen = event => {\n            console.log('success')\n          dispatch({ type: onOpen, payload: event });\n        };\n\n        socket.onerror = event => {\n            console.log('fail')\n            console.log(event)\n          dispatch({ type: onError, payload: event });\n        };\n\n        socket.onmessage = event => {\n            console.log('message')\n\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { success, ...restParsedData } = parsedData;\n\n          dispatch({ type: onMessage, payload: restParsedData });\n        };\n\n        socket.onclose = event => {\n          console.log('close')\n          dispatch({ type: onClose, payload: event });\n        };\n      }\n\n      if(wsClose && type === wsClose && socket) {\n        socket.close()\n      }\n\n      next(action);\n    };\n    };\n}; ","import { compose, createStore, applyMiddleware } from 'redux';\nimport { rootReducer } from './reducers';\nimport thunk from 'redux-thunk';\nimport { socketMiddleware } from './middleware';\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_START, WS_CONNECTION_SUCCESS, WS_GET_ALL_ORDERS, WS_GET_USER_ORDERS, WS_USER_CONNECTION_CLOSED, WS_USER_CONNECTION_ERROR, WS_USER_CONNECTION_START, WS_USER_CONNECTION_SUCCESS } from './actions/ws';\n\nconst wsUrl = 'wss://norma.nomoreparties.space/orders'\n\nconst wsAllOrdersActions = {\n  wsInit: WS_CONNECTION_START,\n  wsClose: WS_CONNECTION_CLOSE,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_ALL_ORDERS\n}\n\nconst wsUserOrdersActions = {\n  wsInit: WS_USER_CONNECTION_START,\n  wsClose: WS_CONNECTION_CLOSE,\n  onOpen: WS_USER_CONNECTION_SUCCESS,\n  onClose: WS_USER_CONNECTION_CLOSED,\n  onError: WS_USER_CONNECTION_ERROR,\n  onMessage: WS_GET_USER_ORDERS\n}\n\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst composeEnhancers =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ \n    : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(\n  thunk, \n  socketMiddleware(wsUrl, wsAllOrdersActions, false),\n  socketMiddleware(wsUrl, wsUserOrdersActions, true),\n));\n\nexport const store = createStore(rootReducer, enhancer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './components/app/app';\n\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router} from 'react-router-dom';\n\nimport {store}  from './services/store';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </Router>\n    \n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"appHeader_header__2hIab\",\"container\":\"appHeader_container__mny_C\",\"navigation\":\"appHeader_navigation__AEaEY\",\"navigationLink\":\"appHeader_navigationLink__2fKxn\",\"profile\":\"appHeader_profile__3k27z appHeader_navigationLink__2fKxn\",\"linkText\":\"appHeader_linkText__1RqhX\",\"navigationLink__active\":\"appHeader_navigationLink__active__2LgeJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"asideMenu_menu__eQb-V\",\"menu__item\":\"asideMenu_menu__item__1m_uH\",\"menu__link\":\"asideMenu_menu__link__2vjit\",\"menu__linkActive\":\"asideMenu_menu__linkActive__BTz_z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"login_login__3KfeJ\",\"login__title\":\"login_login__title__lIbPe\",\"login__form\":\"login_login__form__D4_er\",\"login__input\":\"login_login__input__3Scd2\",\"login__wrapper\":\"login_login__wrapper__3-L4n\",\"login__link\":\"login_login__link__1R8xg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__24xU4\",\"profile__form\":\"profile_profile__form__w8NVP\",\"profile__input\":\"profile_profile__input__3LEfb\",\"profile__wrapper\":\"profile_profile__wrapper__35vVE\",\"profile__info\":\"profile_profile__info__32GLv\",\"profile__infoItem\":\"profile_profile__infoItem__2hVTh\",\"profile__formActions\":\"profile_profile__formActions__1CbA6\",\"profile__formActionsActive\":\"profile_profile__formActionsActive__3c64Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burgerConstructor_burgerConstructor__1a2oL\",\"burgerConstructor__wrapper\":\"burgerConstructor_burgerConstructor__wrapper__32hFB\",\"burgerConstructor__wrapperMessage\":\"burgerConstructor_burgerConstructor__wrapperMessage__37pbo\",\"burgerConstructor__mainIngridients\":\"burgerConstructor_burgerConstructor__mainIngridients__19NhQ\",\"burgerConstructor__order\":\"burgerConstructor_burgerConstructor__order__3yBn7\",\"burgerConstructor__count\":\"burgerConstructor_burgerConstructor__count__2MYdR\",\"burgerConstructor__icon\":\"burgerConstructor_burgerConstructor__icon__2ZLmi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registration\":\"registration_registration__3GJ0g\",\"registration__title\":\"registration_registration__title__3500I\",\"registration__form\":\"registration_registration__form__2QK6Q\",\"registration__input\":\"registration_registration__input__3fIli\",\"registration__wrapper\":\"registration_registration__wrapper__1JE-N\",\"registration__link\":\"registration_registration__link__3NZ3C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"burgerIngredients_burgerIngredients__3dlPK\",\"burgerIngredients__scrollWrapper\":\"burgerIngredients_burgerIngredients__scrollWrapper__zpIk-\",\"burgerIngredients__items\":\"burgerIngredients_burgerIngredients__items__2yS2s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reset\":\"reset_reset__2LZQl\",\"reset__title\":\"reset_reset__title__35WR9\",\"reset__form\":\"reset_reset__form__3F8CX\",\"reset__input\":\"reset_reset__input__1ZQek\",\"reset__wrapper\":\"reset_reset__wrapper__22Bqz\",\"reset__link\":\"reset_reset__link__PKgE0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetails\":\"ingredientDetails_ingredientDetails__37kMa\",\"title\":\"ingredientDetails_title__1BxPy\",\"infoItems\":\"ingredientDetails_infoItems__MxCYh\",\"infoItem\":\"ingredientDetails_infoItem__2ctOi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"orderIngredientIcon_ingredient__i6Bkr\",\"imgContainer\":\"orderIngredientIcon_imgContainer__30RR6\",\"img\":\"orderIngredientIcon_img__2TnYN\",\"mainCounter\":\"orderIngredientIcon_mainCounter__8aOx3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"forgot\":\"forgot_forgot__1q8e6\",\"forgot__title\":\"forgot_forgot__title__GLm_k\",\"forgot__form\":\"forgot_forgot__form__1dFvq\",\"forgot__input\":\"forgot_forgot__input__2yFTO\",\"forgot__wrapper\":\"forgot_forgot__wrapper__27RRF\",\"forgot__link\":\"forgot_forgot__link__3goQn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderDetails\":\"orderDetails_orderDetails__3TXSI\",\"title\":\"orderDetails_title__2LP8y\",\"icon\":\"orderDetails_icon__3RQ2W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"userOrdersPage_container__1xZ6F\",\"menuInfo\":\"userOrdersPage_menuInfo__2-mzR\",\"orders\":\"userOrdersPage_orders__KQ2Kn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredient\":\"burgerIngredient_burgerIngredient__3wi7I\",\"burgerIngredient__item\":\"burgerIngredient_burgerIngredient__item__E4hPh\",\"burgerIngredient__price\":\"burgerIngredient_burgerIngredient__price__2rkU3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"modal_popup__lnicy\",\"modal\":\"modal_modal__1DF1f\",\"cross\":\"modal_cross__3JYgg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"app__container\":\"app_app__container__3GNZq\"};"],"sourceRoot":""}