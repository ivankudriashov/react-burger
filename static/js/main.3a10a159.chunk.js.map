{"version":3,"sources":["components/burgerIngredients/burgerIngredients.module.css","components/burgerConstructor/burgerConstructor.module.css","components/appHeader/appHeader.js","components/burgerIngredient/burgerIngredient.js","components/utils/types.js","components/burgerIngredients/burgerIngredients.js","services/actions/state.js","components/burgerConstructorIngridient/burgerConstructorIngridient.js","components/burgerConstructor/burgerConstructor.js","components/modalOverlay/modalOverlay.js","components/modal/modal.js","components/orderDetails/orderDetails.js","components/ingredientDetails/ingredientDetails.js","components/app/app.js","services/reducers/state.js","services/reducers/index.js","services/store.js","index.js","components/ingredientDetails/ingredientDetails.module.css","components/appHeader/appHeader.module.css","components/orderDetails/orderDetails.module.css","components/modal/modal.module.css","components/app/app.module.css","components/burgerIngredient/burgerIngredient.module.css","components/burgerConstructorIngridient/burgerConstructorIngridient.module.css","components/modalOverlay/modalOverlay.module.css"],"names":["module","exports","AppHeader","props","className","headerStyles","header","container","navigation","href","navigationLink","type","profile","BurgerIngredient","PropTypes","shape","_id","string","name","proteins","number","fat","carbohydrates","calories","price","image","image_mobile","image_large","__v","onClick","item","id","constructorIngridientsId","useSelector","state","ingridients","useDrag","dragRef","ref","burgerIngredientStyles","burgerIngredient","count","ingredient","forEach","getCount","size","src","alt","burgerIngredient__price","BurgerIngredients","useState","current","setCurrent","refBun","useRef","refSauce","refMain","burgerIngredientsStyles","burgerIngredients","style","display","value","active","scrollIntoView","behavior","burgerIngredients__scrollWrapper","onScroll","e","listTop","target","getBoundingClientRect","top","bunTop","bunBottom","bottom","sauceTop","sauceBottom","mainTop","mainBottom","burgerIngredients__ingredients","burgerIngredients__items","filter","map","GET_ALL_INGRIDIENTS_REQUEST","GET_ALL_INGRIDIENTS_SUCCESS","GET_ALL_INGRIDIENTS_FAILED","GET_ORDER_NUMBER_SUCCESS","GET_ORDER_NUMBER_FAILED","GET_INGRIDIENTS_IDS","GET_INGRIDIENTS_CONSTRUCTOR","GET_BUN_CONSTRUCTOR","GET_OTHER_INGRIDIENTS_CONSTRUCTOR","DELETE_INGRIDIENT","GET_TOTAL_PRICE","OPEN_INGRIDIENT_DATA","CLOSE_INGRIDIENT_DATA","OPEN_ORDER_DATA","CLOSE_ORDER_DATA","CONSTRUCTOR_INGREDIENTS_SORT","CLEAR_CONSTRUCTOR","BASE_URL","checkResponse","res","ok","json","Promise","reject","status","BurgerConstructorIngridient","deleteIngridient","index","dispatch","useDispatch","useDrop","accept","hover","monitor","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","getClientOffset","y","moveIngredient","drop","dragDropRef","drag","burgerConstructorIngridientStyles","burgerConstructorIngridient","handleClose","secondId","text","thumbnail","BurgerConstructor","React","forwardRef","constructorIngridients","totalPrice","console","log","bun","find","ingridient","otherIngridient","Date","now","toString","Math","random","substr","dropTarget","useEffect","total","ids","constructorIngridientId","burgerConstructorStyles","burgerConstructor","burgerConstructor__wrapper","flexDirection","gap","burgerConstructor__bunIngridient","isLocked","burgerConstructor__mainIngridients","burgerConstructor__order","burgerConstructor__count","burgerConstructor__icon","ModalOverlay","modalOverlayStyles","modalOverlay","modalRoot","document","getElementById","Modal","onClose","close","key","window","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","popup","modal","evt","stopPropagation","cross","children","OrderDetails","orderNumber","orderDetailsStyles","orderDetails","title","subtitle","icon","IngredientDetails","indridientId","clickedIngridient","ingredientDetails","infoItems","infoItem","App","modalIngredientDetailsOpened","modalOrderDetailsOpened","buttonElement","fetch","then","success","data","catch","err","handleCloseModal","appStyles","app","app__container","DndProvider","backend","HTML5Backend","currentTarget","orderIngredientsIds","method","headers","body","JSON","stringify","order","getOrderNumber","initialState","ingridientsRequest","ingridientsFailed","buns","otherIngridients","rootReducer","combineReducers","action","concat","sortIngridients","otherIngredientsSort","splice","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","render","StrictMode"],"mappings":"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","file":"static/js/main.3a10a159.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"burgerIngredients_burgerIngredients__3dlPK\",\"burgerIngredients__scrollWrapper\":\"burgerIngredients_burgerIngredients__scrollWrapper__zpIk-\",\"burgerIngredients__items\":\"burgerIngredients_burgerIngredients__items__2yS2s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burgerConstructor_burgerConstructor__1a2oL\",\"burgerConstructor__wrapper\":\"burgerConstructor_burgerConstructor__wrapper__32hFB\",\"burgerConstructor__mainIngridients\":\"burgerConstructor_burgerConstructor__mainIngridients__19NhQ\",\"burgerConstructor__order\":\"burgerConstructor_burgerConstructor__order__3yBn7\",\"burgerConstructor__count\":\"burgerConstructor_burgerConstructor__count__2MYdR\",\"burgerConstructor__icon\":\"burgerConstructor_burgerConstructor__icon__2ZLmi\"};","import headerStyles from './appHeader.module.css';\n\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nconst AppHeader = (props) => {\n    return (\n        <header className={headerStyles.header}>\n            <div className={headerStyles.container} >\n                <nav>\n                    <ul className={headerStyles.navigation}>\n                        <li className=\"mt-4 mb-4 mr-2 pr-5 pl-5\">\n                            <a href=\"#\" className={headerStyles.navigationLink}>\n                                <BurgerIcon type=\"primary\" />\n                                <p className=\"text text_type_main-default ml-2\">\n                                    Конструктор\n                                </p>\n                            </a>\n                        </li>\n                        <li className=\"mt-4 mb-4 pr-5 pl-5\">\n                            <a href=\"#\" className={headerStyles.navigationLink}>\n                                <ListIcon type=\"secondary\" />\n                                <p className=\"text text_type_main-default text_color_inactive ml-2\">\n                                    Лента заказов\n                                </p>\n                            </a>                        \n                        </li>\n                    </ul>\n                </nav>\n                \n                <Logo />\n\n                <a href=\"#\" className={headerStyles.profile}>\n                    <ProfileIcon type=\"secondary\" />\n                    <p className=\"text text_type_main-default text_color_inactive ml-2\">\n                        Личный кабинет\n                    </p>\n                </a>  \n            </div>                         \n        </header>\n    );\n}\n\nexport default AppHeader;","import { useDrag } from \"react-dnd\";\nimport PropTypes from 'prop-types';\nimport burgerIngredientStyles from './burgerIngredient.module.css';\n\nimport { useSelector } from 'react-redux';\n\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport {ingredientType} from '../utils/types';\n\nconst BurgerIngredient = ({onClick, item, id}) => {\n    const { constructorIngridientsId }  = useSelector(state => state.ingridients);\n\n    function getCount(ingredient) {\n        let count = 0;\n\n        constructorIngridientsId.forEach(item => {\n            if (item === ingredient._id) {\n                if(ingredient.type === \"bun\") {\n                    count = 2\n                } else {\n                    count += 1\n                }\n            }\n        })\n\n        return count;\n    }\n\n    const [, dragRef] = useDrag({\n        type: \"ingredient\",\n        item: {item}\n    });\n\n    return (\n            <li ref={dragRef} onClick={onClick} key={item._id} id={id} className={`mr-2 ml-2 ${burgerIngredientStyles.burgerIngredient}`} >\n                <Counter count={getCount(item)} size=\"default\" />\n                <img className=\"mr-4 ml-4 mb-2\" src={item.image} alt={item.name} />\n                <div className={`mb-2 ${burgerIngredientStyles.burgerIngredient__price}`}>\n                    <p className={`mr-2 text text_type_digits-default`}>{item.price}</p>\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n                <p className=\"mb-8 text text_type_main-default\">{item.name}</p>\n            </li>\n    );\n}\n\nBurgerIngredient.propTypes = {\n    onClick: PropTypes.func.isRequired,\n    item: ingredientType.isRequired,\n    id: PropTypes.string.isRequired,\n};\n\nexport default BurgerIngredient;","import PropTypes from 'prop-types';\n\nexport const ingredientType = PropTypes.shape({\n    _id: PropTypes.string,\n    name: PropTypes.string,\n    type: PropTypes.string,\n    proteins: PropTypes.number,\n    fat: PropTypes.number,\n    carbohydrates: PropTypes.number,\n    calories: PropTypes.number,\n    price: PropTypes.number,\n    image: PropTypes.string,\n    image_mobile: PropTypes.string,\n    image_large: PropTypes.string,\n    __v: PropTypes.number\n  })","import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport burgerIngredientsStyles from './burgerIngredients.module.css';\n\nimport BurgerIngredient from '../burgerIngredient/burgerIngredient';\n\nimport { useSelector } from 'react-redux';\n\nimport { Tab} from '@ya.praktikum/react-developer-burger-ui-components'\n\n\nconst BurgerIngredients = ({onClick}) => {\n    const [current, setCurrent] = useState('one');\n\n    const { ingridients } = useSelector(state => state.ingridients);\n\n    const refBun = useRef();\n    const refSauce = useRef();\n    const refMain = useRef();\n\n    const scrollTab = (e) => {\n        const listTop = e.target.getBoundingClientRect().top;\n\n        const bunTop = refBun.current.getBoundingClientRect().top;\n        const bunBottom = refBun.current.getBoundingClientRect().bottom;\n        const sauceTop = refSauce.current.getBoundingClientRect().top;\n        const sauceBottom = refSauce.current.getBoundingClientRect().bottom;\n        const mainTop = refMain.current.getBoundingClientRect().top;\n        const mainBottom = refMain.current.getBoundingClientRect().bottom;\n\n        if (listTop >= bunTop && listTop < bunBottom) {\n            setCurrent('one');\n        } else if (listTop >= sauceTop && listTop < sauceBottom) {\n            setCurrent('two');\n        } else if (listTop >= mainTop && listTop < mainBottom) {\n            setCurrent('three');\n        }\n    }\n\n    return (\n        <section className={`mr-10 ml-5 ${burgerIngredientsStyles.burgerIngredients} `}>\n            <h1 className=\"mt-10 mb-5 text text_type_main-large\">Соберите бургер</h1>\n            <div style={{ display: 'flex' }}>\n                <Tab value=\"one\" active={current === 'one'} onClick={(value) => {\n                    setCurrent(value);\n                    refBun.current.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    Булки\n                </Tab>\n                <Tab value=\"two\" active={current === 'two'} onClick={(value) => {\n                    setCurrent(value);\n                    refSauce.current.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    Соусы\n                </Tab>\n                <Tab value=\"three\" active={current === 'three'} onClick={(value) => {\n                    setCurrent(value);\n                    refMain.current.scrollIntoView({behavior: 'smooth'});\n                }}>\n                    Начинки\n                </Tab>\n            </div>\n\n            <div className={`${burgerIngredientsStyles.burgerIngredients__scrollWrapper}`} onScroll={scrollTab}>\n                <div ref={refBun} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 1`}>Булки</h2>\n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter(item => item.type === \"bun\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))} \n                    </ul>\n                </div>\n\n                <div ref={refSauce} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 2`}>Соусы</h2>                \n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter(item => item.type === \"sauce\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))}\n                    </ul> \n                </div>\n\n                <div ref={refMain} className={`pt-10 ${burgerIngredientsStyles.burgerIngredients__ingredients}`}>\n                    <h2 className={`mb-6 text text_type_main-medium 3`}>Основные ингридиенты</h2>                \n                    <ul className={`pl-2 ${burgerIngredientsStyles.burgerIngredients__items}`}>\n                        {ingridients.filter(item => item.type === \"main\").map((item) => (\n                            <BurgerIngredient onClick={onClick} item={item} key={item._id} id={item._id}/>\n                        ))}\n                    </ul> \n                </div>\n            </div>\n        </section>\n    );\n}\n\n  BurgerIngredients.propTypes = {\n    onClick: PropTypes.func.isRequired\n};\n\n\nexport default BurgerIngredients;","export const GET_ALL_INGRIDIENTS_REQUEST = 'GET_ALL_INGRIDIENTS_REQUEST';\nexport const GET_ALL_INGRIDIENTS_SUCCESS = 'GET_ALL_INGRIDIENTS_SUCCESS';\nexport const GET_ALL_INGRIDIENTS_FAILED = 'GET_ALL_INGRIDIENTS_FAILED';\n\nexport const GET_ORDER_NUMBER_REQUEST = 'GET_ORDER_NUMBER_REQUEST';\nexport const GET_ORDER_NUMBER_SUCCESS = 'GET_ORDER_NUMBER_SUCCESS';\nexport const GET_ORDER_NUMBER_FAILED = 'GET_ORDER_NUMBER_FAILED';\n\nexport const GET_INGRIDIENTS_IDS = 'GET_INGRIDIENTS_IDS';\nexport const GET_INGRIDIENTS_CONSTRUCTOR = 'GET_INGRIDIENTS_CONSTRUCTOR';\nexport const GET_BUN_CONSTRUCTOR = 'GET_BUN_CONSTRUCTOR';\nexport const GET_OTHER_INGRIDIENTS_CONSTRUCTOR = 'GET_OTHER_INGRIDIENTS_CONSTRUCTOR';\n\nexport const DELETE_INGRIDIENT = 'DELETE_INGRIDIENT';\n\nexport const GET_TOTAL_PRICE = 'GET_TOTAL_PRICE';\n\nexport const OPEN_INGRIDIENT_DATA = 'OPEN_INGRIDIENT_DATA';\nexport const CLOSE_INGRIDIENT_DATA = 'CLOSE_INGRIDIENT_DATA';\n\nexport const OPEN_ORDER_DATA = 'OPEN_ORDER_DATA';\nexport const CLOSE_ORDER_DATA = 'CLOSE_ORDER_DATA';\n\nexport const GET_ORDER_NUMBER = 'GET_ORDER_NUMBER';\nexport const CONSTRUCTOR_INGREDIENTS_SORT = 'CONSTRUCTOR_INGREDIENTS_SORT';\nexport const CLEAR_CONSTRUCTOR = 'CLEAR_CONSTRUCTOR';\n\nconst BASE_URL = 'https://norma.nomoreparties.space/api';\n\nfunction checkResponse(res) {\n  if (res.ok) {\n      return res.json();\n  }\n  return Promise.reject(`Ошибка ${res.status}`);\n}\n\nexport function getOrderNumber(orderIngredientsIds) {\n  return function(dispatch) {\n    dispatch({\n      type: GET_ALL_INGRIDIENTS_REQUEST\n    })\n    fetch(`${BASE_URL}/orders`, {\n                      method: 'POST',\n                      headers: {\n                          'Content-Type': 'application/json'\n                          },\n                      body: JSON.stringify(orderIngredientsIds)\n                  })\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        dispatch({\n          type: GET_ORDER_NUMBER_SUCCESS,\n          orderNumber: res.order.number\n        })\n        dispatch({\n          type: CLEAR_CONSTRUCTOR,\n      });\n      } else {\n        dispatch({\n          type: GET_ORDER_NUMBER_FAILED\n        })\n      }\n    }).catch( err => {\n      dispatch({\n          type: GET_ORDER_NUMBER_FAILED\n      })\n    })\n  };\n}\n\n\nexport function getAllIngridients() {\n  return function(dispatch) {\n    dispatch({\n      type: GET_ORDER_NUMBER_REQUEST\n    })\n    fetch(`${BASE_URL}/ingredients`)\n    .then(checkResponse)\n    .then(res => {\n      if (res && res.success) {\n        dispatch({\n          type: GET_ALL_INGRIDIENTS_SUCCESS,\n          ingridients: res.data\n        })\n      } else {\n        dispatch({\n          type: GET_ALL_INGRIDIENTS_FAILED\n        })\n      }\n    }).catch( err => {\n      dispatch({\n          type: GET_ALL_INGRIDIENTS_FAILED\n      })\n    })\n  };\n}","import React, { useRef }  from 'react';\nimport PropTypes from 'prop-types';\nimport { useDrop, useDrag } from \"react-dnd\";\n\nimport burgerConstructorIngridientStyles from './burgerConstructorIngridient.module.css';\n\nimport { ConstructorElement, DragIcon} from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useDispatch } from 'react-redux';\n\nimport {ingredientType} from '../utils/types';\n\nimport { \n    GET_INGRIDIENTS_CONSTRUCTOR,\n    CONSTRUCTOR_INGREDIENTS_SORT\n } from '../../services/actions/state';\n\nconst BurgerConstructorIngridient = ({deleteIngridient, item, id, index}) => {\n\n    const dispatch = useDispatch();\n\n    const moveIngredient = (dragIndex, hoverIndex) => {\n        dispatch({\n            type: CONSTRUCTOR_INGREDIENTS_SORT,\n            dragIndex,\n            hoverIndex\n        });\n        \n        dispatch({\n            type: GET_INGRIDIENTS_CONSTRUCTOR,\n        });\n    };\n\n    const ref = useRef(null);\n    const [, drop] = useDrop({\n        accept: 'sortIngridients-item',\n        hover(item, monitor) {\n            if (!ref.current) {\n                return;\n            }\n            const dragIndex = item.index;\n            const hoverIndex = index;\n            if (dragIndex === hoverIndex) {\n                return;\n            }\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n            const clientOffset = monitor.getClientOffset();\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return;\n            }\n\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return;\n            }\n\n            moveIngredient(dragIndex, hoverIndex);\n\n            item.index = hoverIndex;\n        },\n    });\n\n    const [, drag] = useDrag({\n        type: 'sortIngridients-item',\n        item: () => {\n            return { id, index };\n        },\n    });\n\n    const dragDropRef = drag(drop(ref));\n\n    return (\n        <li ref={dragDropRef} className={`${burgerConstructorIngridientStyles.burgerConstructorIngridient}`} >\n            <DragIcon  type=\"primary\" />\n            <ConstructorElement\n                handleClose={() => {\n                    deleteIngridient(item.secondId, item._id)\n                }}\n                text={`${item.name}`}\n                price={`${item.price}`}\n                thumbnail={`${item.image}`}\n            />\n        </li>\n    );\n};\n\nBurgerConstructorIngridient.propTypes = {\n    deleteIngridient: PropTypes.func.isRequired,\n    id: PropTypes.string.isRequired,\n    index: PropTypes.number.isRequired,\n    item: ingredientType.isRequired,\n};\n\nexport default BurgerConstructorIngridient;","import React, { useEffect, useMemo }  from 'react';\nimport PropTypes from 'prop-types';\nimport { useDrop, useDrag } from \"react-dnd\";\n\nimport burgerConstructorStyles from './burgerConstructor.module.css';\n\nimport BurgerConstructorIngridient from '../burgerConstructorIngridient/burgerConstructorIngridient';\n\nimport { ConstructorElement, DragIcon, CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\n\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { \n    GET_TOTAL_PRICE, \n    DELETE_INGRIDIENT, \n    GET_INGRIDIENTS_IDS,\n    GET_BUN_CONSTRUCTOR,\n    GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n    GET_INGRIDIENTS_CONSTRUCTOR } from '../../services/actions/state';\n\nconst BurgerConstructor = React.forwardRef(({onClick}, ref) => {\n\n    const { ingridients }  = useSelector(state => state.ingridients);\n    const { constructorIngridients }  = useSelector(state => state.ingridients);\n    const { totalPrice }  = useSelector(state => state.ingridients);\n\n    console.log()\n\n    const dispatch = useDispatch();\n\n    const bun = constructorIngridients.find((item) => item.type === \"bun\");\n\n    function deleteIngridient(secondId, id) {\n        dispatch({\n            type: DELETE_INGRIDIENT,\n            secondId,\n            id\n        });\n    } \n\n    const draggableIngredient = (id) => {\n        ingridients.forEach((ingridient) => {\n            if (ingridient._id === id) {\n\n                 if (ingridient.type === 'bun') {\n                    dispatch({\n                        type: GET_BUN_CONSTRUCTOR,\n                        bun: ingridient\n                    });\n\n                    dispatch({\n                        type: GET_INGRIDIENTS_CONSTRUCTOR,\n                    });\n                } else if (constructorIngridients[0]) {\n                    const uid = () => Date.now().toString(36) + Math.random().toString(36).substr(2);\n\n                    dispatch({\n                        type: GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n                        otherIngridient: {...ingridient, secondId: uid()}\n                    });\n\n                    dispatch({\n                        type: GET_INGRIDIENTS_CONSTRUCTOR,\n                    });\n                }\n            }\n        })\n    }\n\n    const [, dropTarget] = useDrop({\n        accept: \"ingredient\",\n        drop({item}) {\n            draggableIngredient(item._id)\n        },\n    });\n\n    useEffect(\n        () => {\n            let total = 0;\n            constructorIngridients.map(item => (total += item.price));\n            dispatch({\n                type: GET_TOTAL_PRICE,\n                totalPrice: total\n            });\n\n            let ids = []\n            constructorIngridients.forEach((ingridient, index) => {\n                ids[index] = ingridient._id\n            })\n\n            dispatch({\n                type: GET_INGRIDIENTS_IDS,\n                constructorIngridientId: ids\n            });\n        },\n        [dispatch, constructorIngridients]\n    );\n\n    return (\n        <section className={`pt-25 ${burgerConstructorStyles.burgerConstructor} `}>\n            <div ref={dropTarget} className={`${burgerConstructorStyles.burgerConstructor__wrapper} `} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>  \n                {bun && <div className={`pl-8 pr-4 ${burgerConstructorStyles.burgerConstructor__bunIngridient} `}>\n                    \n                        <ConstructorElement\n                            key={bun.secondId}\n                            type=\"top\"\n                            isLocked={true}\n                            text={`${bun.name} (верх)`}\n                            price={`${bun.price}`}\n                            thumbnail={`${bun.image}`}\n                        />\n                    \n                </div>}\n                { ingridients && <ul className={`pr-2 ${burgerConstructorStyles.burgerConstructor__mainIngridients} `}>\n                    {constructorIngridients.filter(item => item.type === \"main\" || item.type === \"sauce\").map((item, index) => (\n                        <BurgerConstructorIngridient item={item} deleteIngridient={deleteIngridient} key={item.secondId} index={index} id={item._id}/>\n                    ))}\n                </ul> }\n\n                {bun && <div className={`pl-8 pr-4 ${burgerConstructorStyles.burgerConstructor__bunIngridient} `}>\n                        <ConstructorElement\n                            key={bun.secondId}\n                            type=\"bottom\"\n                            isLocked={true}\n                            text={`${bun.name} (низ)`}\n                            price={`${bun.price}`}\n                            thumbnail={`${bun.image}`}\n                        />\n                </div>}\n            </div>\n            <div className={`pr-4 mt-10 ${burgerConstructorStyles.burgerConstructor__order}`}>\n               {totalPrice && <p className={`text text_type_digits-default ${burgerConstructorStyles.burgerConstructor__count}`}>{totalPrice}</p>}\n                <div className={`mr-10 ${burgerConstructorStyles.burgerConstructor__icon}`}>\n                    <CurrencyIcon type=\"primary\" />\n                </div>\n\n                <div ref={ref}>\n                    <Button onClick={onClick} type=\"primary\" size=\"large\">\n                        Оформить заказ\n                    </Button>\n                </div>\n                \n            </div>\n        </section>\n    );\n});\n\nBurgerConstructor.propTypes = {\n    onClick: PropTypes.func.isRequired\n};\n\nexport default BurgerConstructor;","import modalOverlayStyles from './modalOverlay.module.css';\n\nconst ModalOverlay = () => {\n    return (\n        <div className={modalOverlayStyles.modalOverlay}></div>\n    )    \n}\n\nexport default ModalOverlay;","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types';\n\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport modalStyles from './modal.module.css';\n\nimport ModalOverlay from '../modalOverlay/modalOverlay';\n\nconst modalRoot = document.getElementById(\"root\");\n\nconst Modal = (props) => {\n  \n    const { onClose } = props;\n\n    React.useEffect(() => {\n        const close = (e) => {\n          if(e.key === \"Escape\"){\n            onClose();\n          }\n        }\n        window.addEventListener('keydown', close)\n      return () => window.removeEventListener('keydown', close)\n    },[]);\n\n    return ReactDOM.createPortal((\n        <div className={modalStyles.popup} onClick={onClose}>\n            <ModalOverlay />\n            <div className={modalStyles.modal} onClick={(evt) => {\n                evt.stopPropagation()}}>\n                <div className={modalStyles.cross} onClick={onClose}>\n                    <CloseIcon type=\"primary\"/>\n                </div>\n                {props.children}\n            </div>\n        </div>\n      ),\n      modalRoot\n    )\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired\n};\n\nexport default Modal;","import { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport orderDetailsStyles from './orderDetails.module.css';\n\nimport { useSelector } from 'react-redux';\n\nconst OrderDetails = () => {\n\n    const { orderNumber }  = useSelector(state => state.ingridients);\n\n    return (\n        <div className={`pt-30 pb-30 ${orderDetailsStyles.orderDetails}`}>\n            <h2 className={`text text_type_digits-large mb-8 ${orderDetailsStyles.title}`}>{orderNumber}</h2>\n            <p className={`text text_type_main-medium mb-15 ${orderDetailsStyles.subtitle}`}>идентификатор заказа</p>\n            <div className={`mb-15 ${orderDetailsStyles.icon}`}>\n                <CheckMarkIcon />\n            </div>\n            <p className={`text text_type_main-default mb-2`}>Ваш заказ начали готовить</p>\n            <p className={`text text_type_main-default text_color_inactive`}>Дождитесь готовности на орбитальной станции</p>\n        </div>\n    )\n}\n\nexport default OrderDetails;","import ingredientDetails from './ingredientDetails.module.css';\n\nimport { useSelector } from 'react-redux';\n\nconst IngredientDetails = () => {\n\n    const { indridientId }  = useSelector(state => state.ingridients);\n    const { ingridients } = useSelector(state => state.ingridients);\n\n    const clickedIngridient = ingridients.filter(item => item._id === indridientId);\n\n    return (\n        <div className={`pt-10 pb-15 ${ingredientDetails.ingredientDetails}`}>\n            <h2 className={`pl-10 text text_type_main-large ${ingredientDetails.title}`}>Детали ингредиента</h2>\n            <img className={`mb-4`} src={clickedIngridient[0].image_large} alt={clickedIngridient[0].name} />\n            <p className={`mb-8 text text_type_main-medium`}>{clickedIngridient[0].name}</p>\n            <ul className={`${ingredientDetails.infoItems}`}>\n                <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                    <span className={`text text_type_main-default text_color_inactive mb-2`}>Калории, ккал</span>\n                    <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient[0].calories}</span>\n                </li>\n                <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                    <span className={`text text_type_main-default text_color_inactive mb-2`}>Белки, г</span>\n                    <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient[0].proteins}</span>\n                </li>\n                <li className={`mr-5 ${ingredientDetails.infoItem}`}>\n                    <span className={`text text_type_main-default text_color_inactive mb-2`}>Жиры, г</span>\n                    <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient[0].fat}</span>\n                </li>\n                <li className={`${ingredientDetails.infoItem}`}>\n                    <span className={`text text_type_main-default text_color_inactive mb-2`}>Углеводы, г</span>\n                    <span className={`text text_type_digits-default text_color_inactive`}>{clickedIngridient[0].carbohydrates}</span>\n                </li>\n            </ul>\n        </div>\n    )\n}\n\nexport default IngredientDetails;","import React, { useEffect }  from 'react';\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport appStyles from './app.module.css';\n\nimport AppHeader from '../appHeader/appHeader';\nimport BurgerIngredients from '../burgerIngredients/burgerIngredients';\nimport BurgerConstructor from '../burgerConstructor/burgerConstructor';\nimport Modal from '../modal/modal';\nimport OrderDetails from '../orderDetails/orderDetails';\nimport IngredientDetails from '../ingredientDetails/ingredientDetails';\n\nimport { getOrderNumber } from '../../services/actions/state';\nimport { getAllIngridients } from '../../services/actions/state';\n\nimport { \n    OPEN_INGRIDIENT_DATA, \n    CLOSE_INGRIDIENT_DATA, \n    OPEN_ORDER_DATA, \n    CLOSE_ORDER_DATA, \n} from '../../services/actions/state';\n\nconst App = (props) => {\n\n    const { constructorIngridientsId }  = useSelector(state => state.ingridients);\n    const { modalIngredientDetailsOpened }  = useSelector(state => state.ingridients);\n    const { modalOrderDetailsOpened }  = useSelector(state => state.ingridients);\n\n    const dispatch = useDispatch();\n\n    const buttonElement = React.useRef(null);\n\n    useEffect(() => {\n        dispatch(getAllIngridients()) \n      }, [dispatch])\n\n    const handleOpenOrderModal = (e) => {\n        const orderIngredientsIds = { \n            \"ingredients\": constructorIngridientsId\n        };\n\n        dispatch({\n            type: OPEN_ORDER_DATA,\n        });\n\n        dispatch(getOrderNumber(orderIngredientsIds));\n       \n    }\n\n    const handleOpenIndredientModal = (e) => {\n        dispatch({\n            type: OPEN_INGRIDIENT_DATA,\n            indridientId: e.currentTarget.id\n        });\n    }\n    \n    const handleCloseModal = () => {\n        dispatch({\n            type: CLOSE_INGRIDIENT_DATA,\n        });\n        dispatch({\n            type: CLOSE_ORDER_DATA\n        });\n    }\n\n    return (\n        <div className={appStyles.app}>\n            <AppHeader />\n            <div className={appStyles.app__container}>\n\n                <DndProvider backend={HTML5Backend}>\n                    <BurgerIngredients onClick={handleOpenIndredientModal}/>\n                    \n                    <BurgerConstructor ref={buttonElement} onClick={handleOpenOrderModal} />\n                </DndProvider>\n\n                {modalIngredientDetailsOpened && \n                <Modal onClose={handleCloseModal}>\n                    <IngredientDetails/>\n                </Modal> }\n\n                {modalOrderDetailsOpened && \n                <Modal onClose={handleCloseModal}>\n                    <OrderDetails/>\n                </Modal> }\n            </div>\n        </div>\n    )\n}\n  \nexport default App;","import {\n  GET_ALL_INGRIDIENTS_REQUEST,\n  GET_ALL_INGRIDIENTS_SUCCESS,\n  GET_ALL_INGRIDIENTS_FAILED,\n  \n  GET_INGRIDIENTS_IDS,\n  GET_BUN_CONSTRUCTOR,\n  GET_OTHER_INGRIDIENTS_CONSTRUCTOR,\n  GET_INGRIDIENTS_CONSTRUCTOR,\n  DELETE_INGRIDIENT,\n  GET_TOTAL_PRICE,\n  CONSTRUCTOR_INGREDIENTS_SORT,\n  CLEAR_CONSTRUCTOR,\n\n  OPEN_INGRIDIENT_DATA,\n  CLOSE_INGRIDIENT_DATA,\n\n  OPEN_ORDER_DATA,\n  CLOSE_ORDER_DATA,\n\n  GET_ORDER_NUMBER_SUCCESS,\n} from '../actions/state';\n\nconst initialState = {\n    ingridients: [],\n    ingridientsRequest: false,\n    ingridientsFailed: false,\n  \n    constructorIngridientsId: [],\n    constructorIngridients: [],\n    buns: [],\n    otherIngridients: [],\n\n    totalPrice: 0,\n  \n    modalIngredientDetailsOpened: false,\n    indridientId: '',\n\n    modalOrderDetailsOpened: false,\n\n    order: {},\n    orderNumber: ''\n  };\n\nexport const ingridientsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_ALL_INGRIDIENTS_REQUEST: {\n      return {\n        ...state,\n        ingridientsRequest: true,\n        ingridientsFailed: false,\n      };\n    }\n    case GET_ALL_INGRIDIENTS_SUCCESS: {\n      return { \n        ...state, \n        ingridients: action.ingridients, \n        ingridientsRequest: false,\n        ingridientsFailed: false,\n      };\n    }\n    case GET_ALL_INGRIDIENTS_FAILED: {\n      return { \n        ...state, \n        ingridientsFailed: true, \n        ingridientsRequest: false \n      };\n    }\n\n    case OPEN_INGRIDIENT_DATA: {\n      return { \n        ...state, \n        modalIngredientDetailsOpened: true,\n        indridientId: action.indridientId\n      };\n    }\n    case CLOSE_INGRIDIENT_DATA: {\n      return { \n        ...state, \n        modalIngredientDetailsOpened: false,\n        indridientId: ''\n      };\n    }\n\n    case OPEN_ORDER_DATA: {\n      return { \n        ...state, \n        modalOrderDetailsOpened: true,\n      };\n    }\n    case CLOSE_ORDER_DATA: {\n      return { \n        ...state, \n        modalOrderDetailsOpened: false,\n      };\n    }\n\n    case GET_TOTAL_PRICE: {\n      return { \n        ...state, \n        totalPrice: action.totalPrice,\n      };\n    }\n\n    case GET_ORDER_NUMBER_SUCCESS: {\n      return {\n        ...state,\n        orderNumber: action.orderNumber\n      };\n    }\n\n    case GET_INGRIDIENTS_IDS: {\n      return {\n        ...state,\n        constructorIngridientsId: action.constructorIngridientId\n      };\n    }\n\n    case GET_INGRIDIENTS_CONSTRUCTOR: {\n      return {\n        ...state,\n        constructorIngridients: state.buns.concat(state.otherIngridients),\n      };\n    }\n\n    case GET_BUN_CONSTRUCTOR: {\n      return {\n        ...state,\n        buns: [action.bun]\n      };\n    }\n\n    case CONSTRUCTOR_INGREDIENTS_SORT: {\n      let sortIngridients = [...state.otherIngridients];\n      let otherIngredientsSort = sortIngridients.splice(action.dragIndex, 1);\n      sortIngridients.splice(action.hoverIndex, 0, ...otherIngredientsSort);\n\n      return {\n        ...state, \n        otherIngridients: sortIngridients\n      }\n    }\n\n    case GET_OTHER_INGRIDIENTS_CONSTRUCTOR: {\n      return {\n        ...state,\n        otherIngridients: [...state.otherIngridients, action.otherIngridient]\n      };\n    }\n\n    case DELETE_INGRIDIENT: {\n      return {\n        ...state,\n        constructorIngridients: [...state.constructorIngridients].filter(item => item.secondId !== action.secondId),\n        otherIngridients: [...state.otherIngridients].filter(item => item.secondId !== action.secondId),\n      };\n    }\n\n    case CLEAR_CONSTRUCTOR: {\n      return {\n        ...state,\n        constructorIngridients: [],\n        buns: [],\n        otherIngridients: []\n      };\n    }\n\n    default: {\n        return state\n    }\n  }\n} ","import { combineReducers } from 'redux';\nimport { ingridientsReducer } from './state';\n\nexport const rootReducer = combineReducers({\n    ingridients: ingridientsReducer\n}) ","import { compose, createStore, applyMiddleware } from 'redux';\nimport { rootReducer } from './reducers';\nimport thunk from 'redux-thunk';\n\nconst composeEnhancers =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\n\nexport const store = createStore(rootReducer, enhancer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './components/app/app';\n\nimport { Provider } from 'react-redux';\n\nimport {store}  from './services/store';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetails\":\"ingredientDetails_ingredientDetails__37kMa\",\"title\":\"ingredientDetails_title__1BxPy\",\"infoItems\":\"ingredientDetails_infoItems__MxCYh\",\"infoItem\":\"ingredientDetails_infoItem__2ctOi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"appHeader_header__2hIab\",\"container\":\"appHeader_container__mny_C\",\"navigation\":\"appHeader_navigation__AEaEY\",\"navigationLink\":\"appHeader_navigationLink__2fKxn\",\"profile\":\"appHeader_profile__3k27z appHeader_navigationLink__2fKxn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderDetails\":\"orderDetails_orderDetails__3TXSI\",\"title\":\"orderDetails_title__2LP8y\",\"icon\":\"orderDetails_icon__3RQ2W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"modal_popup__lnicy\",\"modal\":\"modal_modal__1DF1f\",\"cross\":\"modal_cross__3JYgg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__M9MMq\",\"app__container\":\"app_app__container__3GNZq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredient\":\"burgerIngredient_burgerIngredient__3wi7I\",\"burgerIngredient__price\":\"burgerIngredient_burgerIngredient__price__2rkU3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructorIngridient\":\"burgerConstructorIngridient_burgerConstructorIngridient__Dqwf4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modalOverlay_modalOverlay__1kR9g\"};"],"sourceRoot":""}